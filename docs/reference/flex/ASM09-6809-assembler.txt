so

—ASMOO
:

ASSEMBLER
6809OPTIMIZING

VERSION
3.2

“USER'SGUIDE

IMPORTANT
NOTE
Although every
oes

effort

has

been made to makethesuppl fed

Software and its documentation as accurate

and

a3

functional

©

west
possible, Southw
Technical
Products
Corporation
ik
es
Specifically disclaims any responsibility for any
damages
incurred
or generated
by such material.
Southwest —
Technical Products
roducts
Corporation reserves
to
‘the right
a

—

change

or

revise

this

#09

material

at

any

time

without

° | -ASMOS

1970
Copyright

‘SouthwestTechnical
ProductsCorporation

—_

RIGHTS
RESERVED
ALL

Tableof Contents.
Preface
1.0

*

s

e

*

Ca

°

o

e

SHTPC
Assembler
.

1.1
1.2
1.3

eo

°.

6

0

ee

1.5

Input

252
2.3
2.4
2.5
2.6
2.7

a

*

6

Character
Identifters

ee

be

ee

.

ee

8

8

8

we

we

ee

Boe

ee

ee

ee

ee

6

ew

8

ew

ee

ee

3.0

©

&©

©

©

©

©

6

&

©

eo

8

oe

e

@-

8

@

.

oo

©

©

©

©

©

2.3

Cr

a

a

eo

2.4

*

*

6

©

6.

ee

ee

8

ee

ee

©

6809 Software Architecture
3.1
3.2
3.3
3.4
3.5
3.6

Arithmetic Registers
Pointer

Registers

Cr

Sie

ee

¢

@

@

8

@

se

6

©

©

©

©

©

ee

6

hE

&

8

hl

hl

ee

ee

ee

oo

©

ee

lh

ee

Oe

Ce

Se

ee

eee

6

Few

Oe
©

8

me

6

&

©

©

ee
8

©

eo

ee.

8

8

8

68

.

*

*

«©

@

UL

ee

ee

8

ee

ee

2

2...

Bitwise LogicalOperators
Shift Operators
8

6

.

2.

e

we

2

..

6

ee

e

ee

ee

8

ce

ce

ee

2...

ee

ce

ew

ee

s

ee

60

0
ew

e

ee

.

*

3=2

3-4

ee

ee

|

43

..

6

2...

bud

wo

ee

Anh

*

+

Med

www
*

ek

ee

ee

ee

*

s

*

e

cee

@

©

©

©

©

@©

©

#

©

©

@©

8

8

ee

ew

ee

.

.

4.5

4-6

ee

MH

ee
«

e

4-1

4-1

eee

oe

Operation Mnemonics

3-4

ew

0

3-1

3-2
ee}

we

we

ee

°

|

eee

we

ee

eke

ee

el

tw

ee

e

ee

ee

ee

*
8

:

2-9
2<9

3-1

wee
8

2-3

3-1

Se,

ee ee ee
vs owe

wee

ee

@

hee

ee

°

2=3

eee

©

2-2
2-3

2-6
2-7
2-8

el

Hl

ee

ee

8

8

oe

ee

eee

.

6809

we

eh

8

ee

Se

a

5.0

©

8

ee ee

eS

in Assembler Expressions
Operators
Grouping Operators
2...
Truth Value Operators
6.
Relational
Operators
Oe

e@

er)

le

ee

Terms in. Expressions

Logical Connectives
Table
4.1...

©

©

lel

we

ee

el
2-1

we

ee

ee

4.1
4.2
4.3
4.5
4.6
4.7
4.8
4.9

2-1

ee

wee

SS

Assembler Expressions

4.0

eee

8

ee

ee

ee

oeee

a

Direct

©

ke

‘q-1
1-2
1-2
1-4

2

Ce

o

eos

eee

ee

ProgramCounter
ee
Condition Flag Register
Page Register
Address ing Modes
.

6

©

Ce

ee

ee

ry

©

iv

bed

eee

ee

7

©

3

ww

ew

ee

wee

ee

2.2

©

*

ww

ee

6

8

SS

2.1

*

we

ee

we we
8

ee

ee

ee

ee

.

*

ee

eo

@

Table
Table
Table
Table

:

es

.

1-1

“@
Implicitly Defined Identifters
Input Statements
ee ee ee
CommentStatements
Source Statements
Assembler
eee
Directives
Cr

e

ew

8

2...

a

°

ee

ee

Classification
wee

ee

OO

©

.

*

ae ee ee

ee

©

>

eee

ee

©

s

e

Oe

Oe

o

*

ee

Programs

Language Syntax

*

ee

OOO

Convers fon

2.1

*

Required.Environment
Assembler Distr ibut fon
CommandSyntax
eee
Options
Ce

1.4
2.0

*

4-8

‘See Bel
«.

.

5.1
5.2
5 a33

Condition

Flags

e

.

o

ExtendedNnemonies
6800 Family
ics

*

©

©

&

6

*

e

¢

8
©

.

*

©

8

s.

©

6

ee

ee

ws

6

‘

Hinemon
eo

©

@

~ti-

#8

@
ee

¢

Woe

5-1]
5al
5-1

6.0.

ae
Directives

Assembler

b+

BSZ
END
~ EQU

ee
GON
eee
.

ERR

~~

Block

--

End

OTe
ERRIF
FAIL
FEC

s

--

ee
6.14

ORG

vs eeeoo
ee

-+

¢

8

I

‘Bytes

e

Specify

--

.

Optior

|

Oe

>

@

»

2

*

.

Counter Origin
froaren
Start
New Page
Set

--

&

eee

ee

.

Qualified

--

Set

6.21 SPC on Space Listing
oe
6.22 TTL = Title . Ee
Counter
6.23
Use

8

ee

me

ee
ere
ee

*

“Notes
8.3 s Caution
8.4

ee

ee

elaigls7

ee

8

WarningMessages
Error Messages *. “ee

8.5

:

8.6

. Disaster
eee

6

ott

6

ee
2

©

eeee

Pe .

*

.

.

oe

*

eee

ee

ee

.

6-6

67

886-8
@

e

ee

e

6 ee
ee

Cl

0

eeee

e!

“eo

@

6

6-8

.

oO

*

6-8
6-9

ee

6-9

ee«

6-10.

>:

*

*

.

e

»

*

*

T-1

*

*.

.

«

*

e

*

*

8-1

.

ee

«

ee

2

6-6

8

eee
eee
Fee
ew

ele
ee

6-6

ee

*

e

..

oe ee
ee

6-5

ee6-5

re

«

ee

ce oe

a

See

-

Ce

ee

*

#.

ee
aa a
Assenbler
ErrorMessages
se

.

eeewe
ee ee
eee
oe a
ee oe

ee

Message
Format

ee

a

6

8

e

ee6-4

s

Cee
eee
8

*

6-4

ee

ee

8

Section

Figures...ss

oe

.

.

6-2
6-4
6-4

8

.

6

Program

~-

&

re

-

USE

6-2

+

ee ee
Register
eeoe
es

Page Pseudo

Direct

as

»:

6-1
6-2

“e.

on

we

‘am

“

8.2

eee

*

eo

*

*

LibraryInclusion...
Provide Module
Name.

-

Oe

hue

--

8.1

ee
ee

..

ek

Par

..

a

BLO

6-1

*

ee,ee6-1
6-1

.

eee

»

~-

eee 7.0

.

*

*

8

ee

Be ee
Erro
.

6.16

8

»

ee 6-2
eee
ob
eee
ee
ee
Cee
ee
ee
eer
Form
| Characters
eee
e
entire
ees mee

--

6.20 SETDP

*

ee 8 o

PAG
PROC -- Begin a Procedure Block
6.17 PUBLIC
Begina Public Dictionary
6.18
Data Block |
-QUAL Begin
RMB
6.19
..
Reserve Memory Bytes...
6.15

;

*

*

eS

Generate a Conditional
Generate an Error...
Form Constant Bytes

hadWAM --

6.13

*

°

.

...

1.4%.

~~
--

ee “LIB
OPT

Zeros

Block...

°

Equate Symbol to Expression
Generate an Error...

~-

ee

*

of

Storage
of

eee
it
EON
FCB

*

rere

ele

e

oe

ee

-

O28

eee

8

wm

&

ee

ee

8-1

:

@ 8-1

ee

eee

B-1
8-1

ee

8-2

8-20

.

PREFACE

This

publication

the

SWTPC 6809

was

designed as a reference
manual for
3.
Optimizing Assembler, Version
It is not
intended
as a tutorial
on assembly
language
programming,
nor
fs
it
a reference
intended as
the 6809
on
microprocessor. Although detailed descriptions
are
the
provided
native
for
6809 instructions,
these
should not be considered
exhaustive.
descriptions
The
Motorola MC6809Programing Manual should be consulted
for
‘more
information
onthe 6809. microprocessor.
For
a
tutorial
to
introduction
language
_assembly
programming,
the book COMPUTER
AND PROGRAMMING
ORGANIZATION
by W. Gear
is an excelTent choice.
_

-

ae

=

Tys

‘Assembler
Users Guide _
OO

pe

1.0

Products
Technical

Southwest

=

SWTPC6809resident

The

to

designed

Assembler.

disk
assembler.
assembler isa very powerful

tool.
versatile
programming
structured
programming
support
a

provide

features

added to
and readability.
code modularity
optimizer
that
multi-pass
of
assembled object code.
Two

are

types” “ot optimization
required for an assembly.

disable

es

le1

.

the

reduce

attempts
options

certain

special

many
and

enhance

a
provides
assembler
size and execution. time
provided to selectively

order to reduce the ‘time:

in
:

Suess.

:

Environment
Required

-

oe The asscubieruns on

“Technical”
‘goittiwede
‘Products 6809
A
FLEX

a

microcomputersystem funning.
of

16K

the

24K total

memory is required

user

minimum of
memory) and provides |
system.

operating

(implying
does
not
The assembler
table space.
so
that
in systems with limited
memory,
it
is
to
possible
overflow the symbol table
with very large programs.
The assembler requires approximately
of.
(8.4 + La) * Ns
bytes
symbol |

4.8K of symbol
symbol table,
support a virtual

approximately

.

has

the

In addition,
to

It

techniques

table

in a symbol
space, where is is the average number of characters
to
be
of
symbols
is
total
andNs ‘the
number
‘keptin the dictionary.

:

‘Both:qualified“dae“structuresand proceduresrequirelarger

|

(48 byte)

entries

in

¢

so

table,

ymbol

the

that

of

use

many

procedures will somewhat reduce the | amountof available
- Symbol
table
space.
Similarly, each level of library inclusion requires —
a
buffer
the —
area (336 bytes) dn the symbol table, and will also reduce
amount of available
—
is
‘symbol1 table
space.
that
Note
this space
required
for each | level | of
not
for each inclusion
file
inclusion,
and

structures

itr,

|

processed.
1.2

Assembler
Distribution.

+

‘The ASMO9programis distributed
on Flex formatSeinch and 8=inch.
disk.

floppy

The

disk

disk),

the

the

contains

Flex operating system,
programs (to enable
and the four suppliedassemblerfilesi 0

and
—“CoPy", "NEWDISK",

"LINE" utility

¥

=

~tagMo9.cHD"
file.
The‘mainassembler comaansd

the

"CAT",

tionof
dapltea

S

ey

“ASMOS.CMV"
The: assembler symbol table overlay.
to
“MIKCV.CMD" The binary file
Mikbug format converter.
9

-

to

format
The Mikbug
SBINCY.
CMD"

binaryfile converter.

Theansenblet
as: tong a
eoriaandfile and eveting
may be. renuned:-

the —command
would

and the
‘file
command file

if

the

then

be

example,

assembler will
S

listing.

"“ASM.CHV". If
be

file
named

overlay
were

are

given

the

to. produce
addressfile
unable
an

_

1-1

the

same

name.

"ASM.CMD",the overlay
overlay file is not renamed,

=

or

a

For

name
the

syabolsais.

~

Assembler

~

1.3

Users

Guide

Assembler
The

Command

Syntax

syntax of

general

+++ASM09 <input
The

first

This

file

the

name

of

file

is

output

file

the

output

If

the

specified

be

specification

to
binary file
ita name
specified,

file

1.4

+

on

them

Assembler

Options

The option
by commas,

and

terminated

character.

The

options

-

-

E-

file

the

be

to

file

second

assembled.
is

specification

be generated

by the

defaults. to
not.

that

file.

global

the

input.

file.

defaults

to

"BIN".

the

file

new

old
file.

after

them

will —

Assembler

plus

a

single characters,optionallyseparated

of

FLEX

or

of

end

line

below:

listed

The "a" option
will
cause
an
external
overlay
to generate
those
as entry
symbols defined
included.
will

be

Suppress binary output

The

binary

output

a

it

on disk,

Suppress

Cautions.

produced

by the

Error

Messages.

Suppress

The "C"

warning,

and

too

file.

If

be

deleted.

not

willbinarysop

option

"B"

will

messages

symbol

points

dictionary
of

the

table

Only

no-

Tf

assembler.

of

it

return
carriage
are
may be specified

that

generation
already exists
C

The

specifications.

by. a

symbol

address

B-

name of

list>]

AddressFile.

Generate

assembler
the

the

from file

consists

list

_

is:

specified,
on disk,
exists
already
and
the
replaced
by
command’ line
by placing

file
deleted

separate

A

is

extension

output

automatically
options
are
specified
to

required.

is

command

the

is

the

.

sign,

ASM09

[,<output file>] [,+<option

file>

specification

If

the

will

option

5

the

file

euppressall

caution

assembler.

scojede'

"EB"
optionwill

The

all

produced
by
the
Since
assembler.
all
produced
by the
diagnostic messages
assembler
are
in the
suppressed,- it is possible that errors
source
will
program
by the users
go undetected
error,

messages

caution

—

beingassembled

F-

assembler

The "F"
option
Assenbly
suppress
any
optimization

Foreward

references

Optimize

Time.

to

restrictive
assembler

to
while

optimized.
in
option
G

=

complete
larger

be

in

two

than

debugging
Note

that

the

assembled

modes.

addressing

considerably
useful

will

This.

passes,

required.
a

the

.

program
"R"

option

will
of

cause
object
the

least

“using

option

the
code.

will

force

the.

oe

but

be
code
‘object..
may.
is
option
especially
which
will
be
later
over
takes priority

This

lengths.
determination of ‘branch
. The "G" option will
generated eode output

this

Enable
the
cause
to
code.
assembler
print
all generated binary object
If this
is
not
the
option
specified,
assembler will print up to eight
code
the
on
same line
as
the source
bytes of object
-

statement

__

Users Guide
Assembler
and

any
“suppress
does

then

this

option

additional printed
the
binary file

affect

not

Suppresslisting. The

"L"

cutput

except

from the

assembler,

for

lines

detected ‘by.
the assembler.
non-Motorola

is”
optimization
selected.
Alls

yn

Index

=

suppressed
labels

and

branch

output

be converted

may

Suppress

assembler. to suppress line

the
used to reduce
size of
Format Page
put .
Out
The

to

for

a

title

—

ais.)
checking
to
truncated
six
are
expressions
.

order.
Motorola

Character
If

format.

assemblers

the

binary

the

MIKCV
utilityprogram.
jdne- ‘Musibers.
The vgn option will cause "the

-

output

desired,

is

code
using

-

“range

internally

ate.

object

format

errors

“the
will” -gupresa.
Sptton
Compatability.
processing.
addressing

Arithmetic
characters Of ‘significance.
evaluated
‘using| 4 strict
left-to-right
constants revert to the single
quote only

Mikbug

containing

oe

extended

.

produced»
suppress any ‘printed

»

“SpecifyMotorola
fy

:

:

will

option

Note that

output.

be

functions.

the
"p"

option can be.

This

assemblerlieting.—

‘asseabler
ask

will
The

cause
assembler will
and
assembly,
perform page counting
If
the
is not specified,
this option
are
ignored by the assembler.

formatted

heading for

number output.

for

a

option
printer.

the

TITLEmnenonics

and

© Range. the Mg option
Suppress “Branch
—

|

will

and

PACE
meek

:

Be

cause

to ‘suppress branch/long branch optimization. | The
assembler
‘normally treats branch and long branch mnemonics as
is
and computes which type of branch
identical,
required.
this
feature
is
oe
“suppressed, branches are limited
assembler

|

approximately127bytes
if
produced

oe

a

range

message will

error

range,

and

an

error

is

detected.

This

option

|

be

will

ee
passes
normally
reducethe number of optimization
required.
Suppress
‘produces an
-ayabottable.
Wheneverthe andenbiet®
it
-

object code listing,
of
its
symbol
listing
_

output.

is

It

not

a
normally produces
sorted,
formatted
‘The "s" option
table.
this
suppresses
to
a
possible
produce
symbol
table.
_

withoutproducingobject code listing.
Truncate‘Print‘OutputThe "Tr" optionwill
of
o£
an

eee

reduce

.

bytes

©

code

object

width of the outputlisting.
othe output width is decreased

per

line

Together

in

order

with

to

the

to

the

ee

Mating,
fe

Muabena

the
decrease
"N". option,

obtain

~~

printouts)
eighty column printer. sufficiently
Print ‘UnnamedDictionaries.
The nye optionwill cause the
assembler to print unnamed procedures (ise., procedures WLth aoeee
name
of
in
found
the
symbol table.
Unnamed
"®PRannn")
are.
procedures
included
from
normally
procedures
>
system
on

an

ifbrary ‘files | and

are

of

13-5

table
marginalvalue in the symbol

Assembler

Users

Guide

W = Suppress
and

1.5

=

caution messages

produced

The

output of

with

several

the

The MIKCV
program converts
into

assembler)

commands

is

text

a
a

a

file

format

format

efficient,
object

code

Two
to

binary file
output) from
(such as is
in Mikbug format.
Similarly, the BINCV
file

into

a

binary

time.
execution

space

-++HIKCV <input file>,

<output

file>

<input
HHBINCV

<output

file>

file>,

is compact

a

cassette
tape interfaces.
from
convert
binary format

to

follows:

as

in
and

and

Mikbugformat and text

disk

in

a

format

Mikbugpaper tape

monitors

prom

program will convert
significant
savings

The

file,
syntax

at

a

of

the

and
the
file
input. file specification
output
must
For MIKCV, the input file
be a binary.
extension
of
.BIN is assumed)
(an
and
the
output file must be a
file
is
(a .TRT extension
the
the
BINCV. program,
assumed). For
file
must
be
a text
is
(a .TXT extension
file
assumed) and the

In

case,

each

specification
file
text

input
‘output
If

assembler.

This

loader.

system

programs have been provided
utility
format
and
Mikbug
conversly.

two

will

is
‘program
binary file

assembler

compatable

by

required

the

the

for

is not

it

the

all warning

suppress

option
by the

Programs
Conversion

suitable
but

"W"

The

Warnings.

file

the

be

must

file

output

the

both

required.

are

a

binary
exists

file

on

disk

of
«BIN).
(with ah assumed extension
it
be
deleted
and
will automatically

output file...
replacedwith the
In
‘general, Mikbug format - files will be approximately
2.7‘times
new

larger

than

records

.of

header

block.

the

Mikbug

ignored

the

by the

16.

equivalent
Mikbug format
binary
file.
include
a
and
transfer
bytes
maximum,
The name
of
file
is used as the
the output

header

by

MIKCV.

‘The name

BINCV program.

placed
:

=

1-4

-

in

the

files.

output

address in the
name placed in
is
Mikbug header

Assembler

2.0

ory,

LanguageSyntax:

Input

~

files

Input
are

set.

to

be

to

expected

These

characters.

and

as

rubouts
as a white
treated

charactersare
2.1

assembler consistsof oneor more disk files...

the

to.

zero.

control

8-bit

in

files

may

ASCII
be

code,

noise character

with

and

(same asa

form

biank)- All

.

is

character

tab

horizontal

always
contain
feeds,

may

returns,

carriage
The

These

bit

sign

compressed,

space

The. assembler
treats
input line delimiters.

the

control ~

other

Mo

ignoredby the assembler.

wo

ae

Classifications
Character

-

__

Guide

Users

in the input

‘Eachcharacter

is.
numeric

stream

classified into

four

of

one

.

:

“groups:_alphabetic type characters,
type
characters,—special —
characters,
andSeparator‘characters
(whitenoise)«
case ve
of both
Alphabetic. type characters
upper aad lower
‘consist
In
character.
and
the
the
letters,
character,
underbar
backslash
lower.
the assembler
between upper and
general,
will make a distinction
will
that.
but
defined
case
user,
not make
by
in
the
letters
symbols
For
assembler.
the
to
defined
for
internally
—
distinction
symbols
and
labels
example,
user
“label"
“LABEL”are separate and distinct,
or for
to
matter,
while
the
that
“ix",
name "IX" is identical
register
or
used
be
either
or
to
This
upper
in
"Ix"
"ix".
permite the assembler
of
with a maximum
case:

compatability.
of the
digits zero. chrough
nine,

tower: environments:
Numeric
consist
‘type.chakactace
the
crosshatch

"#",

"@".

It

the dollor

sign
is. important to

"$",

the question

realize

that

mark

"?",

and

the.

type characters |
sign
is
are
When
the
assembler
not
recognising a number, _
necessarily digits.
than
to
one' less
and continue
the digits in the number start at zero
the —
letters
the
of
hexadecimal
A vee
number’ s radix.
In the case
numbers,
even
F. are
through
though thay are alphabetic type
digits,
at

numeric

considered

characters.

‘gharactere:are
‘Special

used.

conditional

assembly

‘designators,

operators.

Since

function

the

context

in

along.

with

the

the

which they

the. “assembleras

quoted

special

of

are

by

string

characters

encountered,

they

delimiters,

These

is

used

262

have
no
semicolon,

the

are

cbest documented

character, the

and

the

space

in
and
to separate
assembler tokens
A special separator
character
significance themselves.
is
besides
a white
being
noise character,
which
"3",

characters

serve

Identifiers

‘Identifiers. ‘consist of

_

as

upon

|

of
secondary aseonbler
denote the presence
soutce statements.

to

=

and

depends heavily

functions bheyperforms
tab
‘Separator‘havacters eonatet.of the horizontal
rubout
the
character,
return
carriage.
character,
character.
general,

comment or

followed

by

maximum

length

characters,

one

While

or

more

of

an

a

type character,
alphabetic
leading
type characters.
~

numeric
alphabetic
identifier
permitted by

The

or

length is
theminimum

=

Da]

ae

two

the

assembler

characters. Note that

is.

127

while

:

Assembler

Users

Guide

single-character

expressly

are

not

or

"B"

can

using indexed addwessingmodes.

In

identifiers
when

—

identifiers

with

to
coding practice
meaningful
instead

In

like

names

with
with

identifiers

use

of

certain
cases,
end
the
of

denote

"A"

identifiers

an

lead

to

general,

it

names

that

arbitrary

and

of
part
reference.
underbar

"EMPLOYEE".The

the

it
identifier;
It.
is important

and

equivalent
treats

is

special

to

all

characters

Some

examples

of

of

as

terminating character
valid

are

as

considered
understand

to

backslash

the

is

EN

defining
results

considered

good

contextually

are

meaningless names.

used to
special terminating
charactersmay be reference
for
identifier,
example, the qualified

“EMPLOYEE.
PENSION"
contains the period character
identifier

prohibited,
unexpected

a terminator
is

not
of

part

that characters
characters
and
The
characters.

identifier

of

the

as
considered
the
qualified.

purpose
terminator
an
as
identifier
significant.

like

the

are

not

.

assembler

valididentifiers

are?

MONTH

-

THIS IS A. VERY_LONG
IDENTIFIER

\Break\,

.

lower case _identifer
task_done?
PLMSSTYLESIDENTIFIER
the

If

Motorola

compatability option has been. selected, the
all
internally
truncate
identifiers
to six characters.
identifier
was
than
originally
the
longer
six
characters,
excess
is
simply
is issued
discarded.
No warning
unless
the
truncation
process
results
in multiple
of a single
definitnions
identifier.

assembler
‘If
the

2.3

-

will

Identifiers

Defined

Implicitly

Assembler initialization
dictionary
the

input

and

assigns

attempt

with

no change

to

identifiers

their

in
the
several
identifers
to
first
values prior
beginning
the
are
identifiers
protected
symbols,

places

These
file.
redefine
their

source

any

in

in

the

value

identifier

will

result

value.

in

These

:

are

DAY

-~

The
a

FALSE

--

MONTH

—-

follows:

as

day of

current

sixteen

The

truth

The

current

a

sixteen

bit

value

the
with

month
bit

value

the

of the

i.e.,—

error

message,

implicitly

defined

an

ASCII characters in’
attribute
set.

two

star

value "TRUE,

YEAR

The last
characters

two
in

the

as

star

of

the

current

sixteen

bit

value

digits
a

year,

with

The truth

set.

month, as

global _
on

pass.

value "FALSE".

TRUE -~
-~

_

two ASCII characters
attribute
set.

year,

with

the

in

as two ASCII
star

attribute

—

Users Guide
Assembler
2h

—

Input Statements

=

files
‘one or more
of
containing
consists
assembler input
assembler
source
directives,
and comment —
statements,
assembler
language
assemble
machine
code
into
actual statements.
Source statements
one.
a
have
in
to
one
corespondence
with general
instructions,
and
—
set
parameters
environmental
Assembler directives
machine operations.
‘The

affecting

code

machine

generation,
are

Comment statements
assembler — program listing
assembler.

structure.

but

and
dictionary
format. an
andby.
unprocessed
the

format,

listing

document

used

to.

are

otherwise.

pe

BES

wo

Es

2.5

=

Statements
Comment

~

ementsbeginwitheither

plus sign "+", an asterisk

a

return
a
carriage
with
getteo or
terminated
a period
".", and are via
the assembler "P" option,
the.
If paginat fon is selected
character.
comments
significance.
assume
special
type
plus
sign and asterisk.
a
the assembler
Those
comments beginning with a plus sign force
to 4 new
a
ae if
immediately preceded the comment.
PAGE mnemonic had
page,
to
the assembler
cause
a new
Comments beginning with an asterisk
force
|
This
current
facility
pageon
the
page if fewer than 14 lines remain
connected sections of —
ds extremely
convenient for preventing logically
source code from overflowing page
tt

:

|

boundaries.

lettin

2.6

-

4

Source Statements

‘The
statements
primary
source
assembler classifies
in
an
to
input lines
their
position
secondary statements according
one
line,
and are
column
input
of.
the
in
Primary
statements begin
the
If
a
primary
or
semicolon.
return
terminated
by a carriage
=
more secondary
or
cone
statement was terminated
with a semicolon,
—
each
terminated.
by a
line,
on the same
statements may follow it
=
restriction
of
only
The
format
carriage
on
semicolon
return.
start
must
f
if
column
is that optional
by
present,
30 of the
lide,
the
from
or
be
separated
preceeding field by only one
input record,

into

and

__

statement

opti

ed

pe

space.

ea

es

wien

:

2.601- Primary
Statements
_

code

operation =
field, an mnemonic
Primary
statements
consistof and label
statement
comment
an
an

operand

field,

an

are

optional

however,an operation
Some

statement;

a

operand field is to be used.
Notice
label and/or operand fields.
line

input colum 30).

_

if

present;

Labels,

that

with

only

must

begin

a

code

field
have
operations
a null
comment

in

line

is

(which

colum

one

All

1f
be present
restrictions
on
a valid
primary
must

begin

of

a

after

primary

label
assembler
identifier.
consist of a valid
Labels
colon.
terminating
or
should terminate with a space, a period,
a
the
of
the.
in
current
are
a
parent
dictionary
colon
defined:
with
declared
Labels
addresses.
and
represent explicitly
dictionary
entry
dictionary
in
the
defined
and
global
with a period are
terminating
statement,

Pati

is

as

field.
must

field,

an

fields

The

and

me

930

—~

Assembler

Users

represent
label
is

global
the value

evaluation,

Guide

definitions.
‘The value
of
of the program counter at
the relocation
has.
attributes

and

program
In

Section

clear

to

of

some

up

an

example of assembly
code
to
is a subroutine
field.
multi-byte

..

of

shift on

a

the

statement

currently

statement
active

my

order

paragraphs,

of

-

counter.

_

primary source
of
beginning

a

the

the

source

details

statements

perform

single

a

te

an

ES

wf

1.

®

2-

+

—
—

of
the previous
is provided.
This
bit
right
arithmetic

:

:

ce

45.

~

-.

A6 84

8.

47

9.

0002
06003
0005

A7
5A

80

10.

0006

A6

84

12.

0008

46

0009

A7. 80
5A

4,
5,

26 F8
39

16.

0008
000C
OOOE

Lines
routine

LDA

few

type

a

line

1 is

routine

LDA

RORA
STA

BNE

Accumulator".
Mode
(see
label
the

labels..

ROTATE

above
it

are

subroutine

is

be

to

extra

document.
thoroughly
comment.

ig

asterisk-type
cross
over

not

a

page

assembler

instructions.
the
left of the

The

line

entry
"LDA"
in

explainingwhat the
comments
Such

subroutines.

source

and represent
actual.

statements

listing.

8

is

an

the

that

this

assembler

"SHIFT:"on line 8 is
and has the value
assembler
mnemonic
for

"Load _

"0,X" is the operand
and
indexed
signifies
addressing
addressing
"ROTATE" on line
modes). The label
is a local
12
and
has
the
value
It
0006 (Hex).
is not
defined anywhere outside
subroutine
and
will
not

Lines 7 and

18

are

assembler
details

on

:

that.

to assure

number.
The label
to
the
point
subroutine
line

Notice

-

=—

This
line helps
in a printed
fold

object code generated by

The

more
For
oS subroutine.
assembler directives.

.

~

©
comments are,
that. the assembler
They
ignores them.
(perhaps
yourself)
attempting
to
always considered good coding practice
to

It

The

fe

‘parameterized.

to

declared

NEXTBYTE

END

.

to
appears
an explicitly
0000
(Hex).

ARITHMETIC.

ONEBIT
ROTATE
RIGHT
PUT BACKIN MEMORY
_
BYTE COUNT
DECREMENT
TILL DONE
CONTINUE

IS

the

are

GET

0, X+

code.

8-17

ae

BACK
IN MEMORY
THE BYTE COUNT
DECREMENT

0,x

lines

will

6809machine

PUT

the

an

Lines

|

0, X+

DECB

ROTATE

Sed

see

GET FIRST
BYTE
SHIFT RIGHT

STA

speaking, unnécessary in
to
provided
benefi Programmers

understand

BIT RIGHT

0,x-

ASRA

strictly
are

of

PROC

SHIFT:

DECB

how

ONE

.

17,
18.

and

A FIELD

ae
.

13.

1-6 of

does

SHIFT

WITH X =>. FIELD TO SHIFT
B =
BYTE COUNT OF FIELD

ll.

a

TO

»

7.

0000

.

ENTER

+

6.
Ok

SUBROUTINE

conflict

directives
their

with

and

function,

other

are

similarly

named

used to delimit the
the chapter
on

consult

=

_
ae

Assembler Users Guide
20662

Statements

Secondary

=

. Secondary
statements begin
primary statement,
and consist of

operand

field,

secondary

statement.

and

a

comment
As
before,
that
operation

terminating
semicolon
code

after
the
mnemonic
operation
Labels
field.
may

a

operand

and

a

field,

not

be

comment

an

in

defined
fields

a

are

Note
optional.
codes
are
required in
secondary
If
the
Statements.
Motorola compatabilityoption hae been
no
selected,
secondary statements
be
short
will
recognised.
segment of code
A
containing
secondary statements will serve to
illustrate their utility:

LDDs CHERSUM=——i—=“it*«ék
Cp the Checkoum
it Left.
LSRA; ROLB
‘Shift
one Bit
ADDD
=——sésAddsin'
the
-NEWORD
Next Word —
=
Back in
STD
Stuff
CRERSUM
Sun

ce

_

==

2.6.3 = Mnemonic

|

Operation
Codes

Assembler sourcestatement mnemonic

-

operation
codes may be 6809
Table
2.1,
mnemonicslisted
6800
Family compatability
listed
in table
2.2, or 6809 extended
in
mnemonics, listed
Ley
The 6809
identical
those
and6800 Family mnemonics

Operation

mnemonics,
table

2.3.

defined byMotorola in

publication

and
The 6800 Family compatability
the process of upgrading previously
Note

M68MASR.

provided to simplify
software

to

are

run

the 6809 Programming

manual,
written 6800
6800 Familyoperations =

Macro

Assemblers

mnemonics

are

on the 6809.
that not all
6809 operations, and that the assembler
will
generate
instruction _-gequences that emulate the 6800
operations.
Several
as
an aid
to structured
extendedmnemonics are provided
programming, and
to. simplify syntax for several types of
operations.
to

have equivalent

fT

For
‘

label

_

mnemonic mustbe
primary
s
tatements,
the
by
(1£ any)
one

least

-

separated from the

separator
No distinction
character.
is
between
upper case and lower case mnemonics, so that.
the mnemonic
a
be
6809 no-operation
either
"NOP" or "nop", or for that
can
at

made
for

Matter,

"Nop" or "nOp", ete.

In

general, each mnemonic code coresponds
This

a
6809
with
machine instruction.
Family mnemonics, and
performs

equivalent

assembler

a

also

cross-assembly

recognises

into

6809instructions.

_

6800

functionally _

:

-

The 6800Familyoperations
have been
included to provide for a
and
-Yapidupgtade to 6809from other members of the family. In

simple
most

the code can simply be reassembled
for the 6809. There are
that
functional differences
In particular,
may create problems.
—
of constructs
use
+12" are likely
to be troublesome.
like
"BNE
In
event, the
cross assembled code
is
to be much less
likely
effecient,
in
terms
of time and code
than
code rewritten
space,
for the 6809.

cases,

certain
the

any.
both

_

__

266.4 Operands
=

Source

are required with
statement
operand
fields the
“mnemonic operations.
If
present,
operand
column

30

field

by exactly

of

the

input statement,
one space.

or be
Operands

~

2n5

=

many of

field must
separated from

can

consist

the

6809
begin
before
the
mnemonic

of register

or flag

=

Assembler

Users

designators,
format

Guide
mode indicators,

addressing

of

operand

an

particular

instruction.

2.6.5

A

functional
is
in
covered
the
field
operand

_

Statement
a

may
noted.

on

follow

is

contain

return

spaces.
found

on

to

opposed

semicolon

character

inform

unless

should appear
should. be
the

assembler

line

is that
statement

it

is

comment

on

multiple

statements

comment

statements)

to

by

a

line

the

instead

STA

FILL

Filla

0,X+; DECB; BNE FILL

ASRA; RORB

_

Shift
a

ee

be

treated

think —
as

a

primary

directives

line

statement,
of

presence

of

input

widely

must always

i.e.,

they

>

Right

fields

are

not

on

the

in

Valid

function
assembler

and

encountered

be

Similarly,

met.

presence
and

be

are

in the contextof

Ae

the only operation
appearing ona
directives
on
have
restrictions
the
an error
if
will generate
message
these _

must

Several

text.

label

‘Yestrictions
restrictions

document.

field

D-Register

Directives.

Assembler

+

Assembler

‘vary

two

In order
statement.
it
to avoid
this
difficulty,
is suggested
the
last
with
secondary statement on a line be terminated
a space
of a
Some examples of this
are
shown: _
semicolon.
technique

that

_

©

may be.

assembler

should

©.

using multiple

when.

make

|

be.

are
input

least

at

statements

more

no

to

may

statements

followed
that

of

end

it

certain
restrictions
30 on
the
column

after

possible

or

secondary

_

this

secondary

have

consideration that must be noted

per
first

the

that

comments

(as

The

end

caused by the ability

will
line.

Another

2.7.

the

of

instructions ‘that

encountered.
of a line,

is

at
the
indicates

statement

the

This
this

Statements

that

the

of

operand ‘field (de present)and

source.input line.

the
First,
semicolon
and
the
semicolon
second,

line,

_

carriage

same

that

the.

statement

A semicolon

the

complication

line
not

the

character.

semicolon

per

of

exact
of

comments

statement

of

end

be

may

One

a

The

capabilities
description
later
chapter

Statement Comments
the

will

mode

addressing

detailed

Statementcommentsfollow
until

continue

expressions.

the

6809
Various
addressing modes
publication.
in
Any information
do not
have
is
treated
as
operands
=

and

with

varies

of operand
discussed

directives

“

are

Qa6 ~

several

fields.
in

a

listed

directives

Assembler
separate chapter
in

table

2.4.

have

directives
of

this

—

-

Assembler
UsersGuide
es

oe

oS

Fable

me

ABX
ADCA.
ADDA

=

ApcE.

ADDB- ADDD

*

*

*

.

*

a
*

ANDCC

ASL= ASLA-“ASLB
ASR
ASRA™‘ASRB
LBCC
LBCS|

BCS...

BEQ-

LBEQ.

BGE

«

i

*

*

a

ee

e

ae

LBLE-

BLT

LBLT

BMI

“LBMI
LBNE

BNE
BPL

ce

we

*

ee

*

.

*

e

@

ee

Add

B to

Add

with Carry
without
Carry

Arithmetic

er

on

o.

eeee
ee

eeee

ee

a

ae

eeee

+.

°*

»

*

*

»

e

2

*.

*

Branch

on

Carry

Branch

on

Equal
Greater
Greater

we‘Branch on
.

cee
Pr

on

°

«

°

.

*

s

2

.

*

¢

+

*

7°.

s

.

.

e

e

.

°

2

8

Branch.

LBRALBRN

-

.

Rege

e

BSR

.

a

ae

LESR

“

BVG-

*

BZS.

*

*

s

*

e

*

»

:

*

.

*

*

*

.

*

2

°

e.

*

ee ee
eo

*

*

+

*

ee

.

CHPB

oy

Higher
Equal
Less

s

eo.
e

ws

:

Oe

°

a

eh

&

Pe

°

-

Clear

Clear
wee
ee
Wyse
Q¢
Compare
a
g:
Compliment
aeee
eeee eoOR
Wait
Conditioned
ee
BS
eeeee
eee
‘Decimal Adjust
ew
ee le
e

—

“Branch on Not Equal
Branch on Plus
Branch
Branch Never
Branch to ‘Subroutine
Branch on Overflow Clear
Branch on Overflow Set.
Branch on Zero
‘Branch on Zero Set
ae

ba)

Sos

&

toe

*

es

“DEC.DECA
=D
EORA|
EXG
IMP

ee

le

ee

Oe
ee
eee
ew
Be
:

WO
eo

8

os

INCB.

Or

ee 8
Exchange
ee
ae
oe ee weae ee_ inerement
Jump
oe
<
- Jump to Subroutine
oo.
Dt
the
be
Load
Register
SP
be

eeeee

|
Registers

_

a

LDA

oo

LEAS_ LEAU LEAX
LSL
LSta LSLB
LSR
LSRA

8

‘«

.)

eee

‘NEGB
eee

ORCC

PSHU
—

ROA
ROR

ROLB
RORB

-

oy Load Effective

*

ee

NEG NEGA

ee
eeee:
ew
we

ew

SRB

PSHS

eee
eee
ae

_

en

¢.

eee

NOP

Decrement
Exclusive

a

Ce

a

INCA”

INC

ROL.

*

*.

CWATee

PULS

*

¢

:

ISR

*

2

LB2S
- eeee*

CLR
CMPA
COM

e

o

o

ee

ee

*

=:

: Branch
aeBranch on
on Minus —

2?

ee

*

or Equal

Less or

ee
eee
eeee Pe
eo
ee
LBVC:
ee
ee
ewe
e ee
BVS
wee
ee.
BZC LBZC.
ee

BRA
“BRN

ss

ne
or ‘Same

‘Bit Test

.

—

Set

Higher

on

er

°*

*

on

Branch on

o

.

ee
ee
ee
ee

Branch
Branch

ee

ee

oe

ee

*

Shift Left
SHift Right
Carry Clear

And

eeeee ee
ee ee,

oe

IXR

eee}
Add

@

*

*

s

»

LBPL

-

2

i

ee

ae

*

.

eee
ee

ee

we er

BLE.

we

*

ee

BHI LBL
BS - ‘LBHS: a
a
BITA- ‘BITE we

*

*

eeee

BET LBGE

*

Logical
eeee
Arithmetic
ee
ee
eeee Ceele eeBranch

ee

oe

*

2

*

*

—

ANDA

eae.
8

=

Codes
Operation

Mnemonic

6809 Assembler

_

2.1

Be

ee

ee

eeee
Oe

.

Se

ee

we

ee ee
ee ee

ane

Pee
Peer

a

‘Logical

Shift
Shift

Multiply.
- Negate

Address
Left

a

ee
ee ww
*

°

a

Se

*

a

_

Or

*

.

*

*

ee ee

*

2-7

|
5

‘Right

eeeeee ~Inclusive
No-Operation
Ree
ee
|
*

ee Se

Logical

-

Push

Pull

Ce
‘Ragisters’stack
Registers

ee
Rotate Right
-

Rotate

Left

ts

S

from
:

|

oe

oe

Assembler

Guide

Users

Table

-

6809

RTI
RTS

.

SBCA.
SEX

~

e

.

SBCB
°

STA

°

eo

6

eo

8

°

es
6

eee

*

e

Pd

*

‘STB st

SUBA

SWI.

«

*

.

°

e

s

>

@

Re

STU

°

«©

«©

©

SWI2

SwI3

@

.

€¢

8

°

e@

©

@

°

eo

@

8

¢

e

ee

TSTA

_

ABA

e

ASLD

°

CBA

*

CLC

o

CLI

e

CLV

°

CPx

*

‘DES

e

DEX

e

“INS

INX
~

*

.

es

le
8

SEV
- STAA

as

*

e

*

kl

e

e

s

°

e

eelel
2

«

*

e

e

°.

Cy

2°

+

e

e

*

PULX

e

e

e

s

e

a

el ca

8

PSHX

ee ew
eeel

ee
a

a

wee

8

ow

€

Oe

WAI

*

oe
2.2

Sign: Extend
Store:
Subtract.
without

e

Software

*

+

Synchronize

*

Transfer

*

e

@ee
e

ee ee

to. Event

Registers

8

o

*

*

*

*

©

©.

A

e

*

e

*

.

°

¢

©

.

»

e

oe

e

@

6é

©

@

*

#

©

°

*

s

«

©

©

s

*

©

©

@

*

e

©

Oe 0.6
e

*

#

°

*

e

©.

*

oe

B to A
Left
Arithmetic
B
A
to
Compare
Add

Clear

Carry
Interrupt.
Overflow

Clear

Clear

Shift

e

8

e

8

e

6

e

©

@

©

©

eo

&

Stack

Inclusive
Push on

e

Set

°

Set

ca

Pointer
Pointer

Stack Pointer
Increment Index
Load Accumulator
Logical Right Shift
from

e

ee

.

Increment

me Pull

8. ew

e

Index

to

Decrement

Mask
_

Decrement

8

wf

€

.

Codes

Ce

a

°

*

Carry

Interrupt

-

le
mee,
@
@

.

wg

Test.

*

*

ee

6

e

°

»

38 ce

eo

#8

*

e

e

OeOe
OeOO[8
*

*.

*

Interrupt

ee Compare
eee
Oe
we le
Index
8

ew

_9sx
~

8

&mhlUl
ee
meeeelhl

°

—

*

TAP

*

me

we

-

»

8

LDAA

SEI

*

eeme ltl

LSRD

SEC

°

wee
ee
a

~

PSHA
PULA

°

e

eeee

ew

*

from

from. Subroutine
Subtract
with
borrow

Operation
6800 Family Mnemonic

..

le

8

emg

29.

Table

-

Supported

Return

ee
eI
Ge
CBee
be

*

ee
eo
TSTB

Return

s

«

e

eee

*

«

«©

ee

«6

SUBD

SYNC

OperationCodes

Mnemonic

SUBB:

TFR

TST

Assembler

cont’

2.1

Or Accumulator

System Stack

=

eee

Stack

System

Carry
Interrupt

ae

=

Mask

Set Overflow

eB 0.
ee
Transfer
Flags
Stack
Index
eeevee @.@.e086
Wait Interrupt
Store Accumulator
‘Transfer Accumulators
—

*

©

ae

@©

@©

8

@

e

©

*

e

@.

s

©

e

*

©

°

8

.

s

©

©€

°

ee

*

eee
6

«

©

*

©

@

se

= 268 —-

Condition

Transfer

and

for

uF

Assembler Users Guide
Table 2.3 =

~

Mnemonic Operation
‘Extended
~

GEC

.

=

EWAL 2

EXIT
MARK ..

eee

ce

*@.

*

*

.

*

*

*

*

e

«

*

*

*

°

.

*

*

€

oe

ae

*

.

oe

+

oe:

ENDF

ew

Table

ee:
we

EQU

ee

we

8

©

8

6

we

»

°

*

*

°

e

@¢

©

@

Ue

¢

©

@©

©

te

ee

a

FCB

is

ae

ORG”

PUBLIC

*

eeee
we

8

ee

ee oe we

ee

ee,

.

oe

si .

ee

7

oe

Ee
°

*

*

*

*

_

Block

Storage

-End of

©

«©

*&

°

End of

&

#8

8

*

Equate Value
Generate

.

ee

*

e

*

ee

¥

Re.

*

é

.

°

Form:

Form

Form

@

@

eee.

*

Include

8

©

ew

oe:

Name

hm

hUehlUe

8

Ue

Ue

Set

«

re

*

ee

.

eee

.

«

«

eee

Eeeae
ee *

Coe

8

Oe

ee

Oe

*

:

ele

os
ee

.

“@

a

Be

8

ee

we

el

*

.

ee

eee

«

ee

ee

*

ew es

*

8

we

8

ee

e

©

©

€

ew

8

ee

oe

we

eo 6

©

©

ww

ew

=

ee

eS

Bytes

Multiple

Bytes

Library
Module

Assembler

‘Reserve
Set Direct

.

Space-

s

&

eee

2-9 =

6

*

*

Begin
Program
Begin New Page

,

Bytes
File
er

Options
Counter
|
_

MemoryBytes
Page

Listing

Provide. Title
Use

=

;

Begin Procedure :
Begin Public
Library
Begin Qualified Structure

*

|e,

Message
Message

Error

Double

©

*

Error

Constant Characters

oe

¢

(Generated)

Form Constant
.

.

@

File

Conditional
.

—

Zeros

of

Segment

+

ee

8

ee

wee

*

*

o

oe

ee
eee.
ee

Be

©.

eee

oes

ee

8

©

aw

,

Condition

Codes

-

*

et

ee

oe

_

Set

-

fe

a

eee

OO

with

.

eee

oe

ewe.

oe ae
eee
oe

®

USE

«

*

Oe

TTL

e
8

eee

‘2

ae

ee

e

ge

*

ee
Oa
Ce
SETDP
SPC
|
ee
Qua

ee
ee)

*

ae

a

PAG
PROC

ee

ee

eee

ee *:

LIB
OPT

6

.

Sa

LE

FD.
FMB

..

*

ge

FCC

-

9

ee
eeee
ee
ww
ERR ee
ee
OeOe
OO
oe
ee
eeee
eee
ee ee eee
ERR

.

*

*

«

for Procedure.
Registers

Stack

Return

Directives

eee

ee

we

we

2.4

eee

ee ee
*

Mark

*

*

Assembler
4

+

-

-

Codes”

Condition

Enable
and Wait
Exit
from
Procedure.

»

BS

Codes

Clear

*

*

2

BSE

se

oe

BSZ
END

*

®

oe

os

sce,

oe

8

eo

..

RET

ee

Addressing
—

Counter
Program

Users Guide_
‘Assembler
3-0

6809

-

Software

Architecture

~The

6809
is
a
microprocessor
stack-oriented,
one-address
microprocessor
four pointer
two accumulators,
containing
a
Yegisters,
ve
page register,
direct
condition
flag register.
anda
With the addition
of more pointer registers
_
and a powerful
complement of addressing
modes,
the
is
a major improvement
6809
over
previous 6800 Family processors.
Figure 3-1 1s a programming model of the 6809 microprocessor. The _
a
following
paragraphs
give
brief description
of each register andof
how
when
referenced
the programmer
writing assembler source
:

_

eedes

it ts

by
oe

ae

Oe

ee

ne
nen

Registers
3s] = Arithmetic
The 6809 has two eight
accumulators) that are used to

-

oe

bit

accumulators
(called the

B

Aand
perform arithmetic
and logic
operations.
For mattyoperations
the A. and
B accumulators can be treated like a
Single sixteen bit
D accumulator),
accumulator
(called
the
providing.

ae

much

improved performance

performs

S

:

all

arithmetic

arithmetic tegisters
Wp,

.

in multiple-precision
operations.
The 6809
operations
in two’s
complement format.
The 6809.
to
are
by the single letters
"A", "B", or

refered

aes

|: 362= Pointer
Registers
The 6809hasfoursixteenbitpointeregistersthat can be used as.

- base addresa

registers

for indexed mode addressing.
There are two index
to
‘Fegisters,
as the "X" and
stac
"Y" registers,
the user
to as the
register, and the system stack pointer,
"Uv"
refered
‘to ap the “S" register.
webs
The various
He
cary
four
Andexed
to
allows
as”
all
used
pointer
registers
be
In addition,
explicit stack pointers.
the two stack registers
have
a
of PUSH and PULLinstructions
_
zero addres
facilitate
(stack).
Ue

S

refered

pointerrefered

‘eombihations

odeaddressing

-

g@ries

to

is
Programing. Thesystem
implicitly
atack
pointer
calls
and
for subroutine
microprocessor
interrupts.

}

used

by

the 6809.

"

Us.

Assembler

3-3

Users

Counter

Program

-

The

6809

refered
be

Guide

to

maintains

as

of

thought

the

"PC"

as

a

an
internal
register.

of

writing

program

~-Condition

3.4

The

These
that

bit

given

addressing

Flag

contains
register.

the

figure

3-2.

A detailed

Register

is

processor
The bit
positions
description

ZT
——_—}

gtare

independent.

and

conceptually
flags.
of the
condition
of each flag

|

_

—

‘register

refered

register

to

as
shown

are

_
in

oo
|

OVERFLOW
ove

oon

2

Carry Flag

-

Bit

zero

represents

the

For

these

In

general,

is

the

the single
to
by
arithmetic

carry flag refered

binary carry
from
operations,
the carry flag

an

and
a

move-type

flag.

"Cc".

letter
It
shift type operation.
unsigned overflow
indicator.
or

an

is

logical

do not

operations

affect

the

"

sy

te

is

:

carry

©

Flag
= Two's Compliment
Overflow

364.2

Bit

one is

single

the

two’s

the

"V".

letter

complement
arithmetic
the
generally
clear
appropriately.
|

(eight

Since

all

6809

or

sixteen

bits),

results

complementoverflow
flag and is
It

is

set

by an

operation

Loads, stores,

overflow.
overflow

flag,

and

refered

that

causes

by

to
a

two's

operations
“logical
operations
set it

ae

while arithmetic

operations are of limited precision
arithmetic
possible
to generate invalid
1s.

signed

when performing
For
when
operations.
arithmetic
example,
bit
performing an eight
to
it is possible
75
addition,
(base
add
10)
(01001011
base
2). to 85 (base 10) (01010101
base
2) and get the invalid
result
-96 (base
base
10) (10100000
2).
What has occured
is that the
of
the
most
carry
significant bit (the sign bit) is different from
out
the
the
carry into
hence
sign bit,
(and ©the
the sign
of the
value)

result

is

invalid.

It

is

complement
performing

overflow

The

result

is

invalid,

the overflowflag

is

—

the

follows.

:

CARRY
HALF

eight-bit
is

Cea

2

rena
maak —
1ROMASK

It

ERE
pk

a

the program counter
provide the capability

condition

-

3.4.1

~Two

executed.

Register

Flag

that
"CC"

_

be

to

modes

position

are

counter
program
register
the
PC register
time,
may

instruction
that
utilize

available

are

modules

Condition

any

to the next

pointer

indexed
modes
addressing
their
for
base address.

sixteen
At

an arithmetic
-64

under

(base

conditions

these

that

the

set.

is

set.

=

B2~

|

.

two’s”

is.
Asanother
example, consider
left shift
on 96 (base
10) (01100000 base 2).
10) (11000000 base
result
2). Since the signed

flag

=

©

ae

eee

Ben

>
‘

|

Assembler Users
3.4.3

Flag

Zero

=

Bit

Guide

is

two

zero

the

flag

and

is

to by the single
refered
letter
is
operation
zero.
After
compare
operations,
this bit
the equal
represents
condition.
After
BIT
type operations,
this flag represents
the
of the
state
tested.
bits,
-. store,
Arithmetic,
load,
and
set
this
logical
operations
flag
eee

"2".

It

is

whenever the result

set

_

an

of

—

—

appropriately.

“Soe

gS

te

ge

aN

oy

eo

_

3.4.4 - Sign Flag
‘Bit three is
"N" (for Negative).

signflag and

the

It is

valid

complement branches
path is taken

Bit
the

if

will

N and

two’s

a

inhibit

subsequent
completes

not

so

flags

complement

and

is

recognize

terrupt

o

that

if

on

will

restore

the

the

the

©

the

if
a
two’s

~

proper

occured.

single letter
flag

this

is

IRQ mask flag to
interrupt
service

interrupt
state of the

stack.

of

the

has

by the
the

until

clears

the

overflow

to
refered
IRQ interrupts

requests

explicitly

interrupt
instruc:
the

from

V

‘acknowledgesequence sets

interrupt

‘routine
from

even

is the IRQ
bit
four
mask
processor

The

set.

both the

use

branch

flag

by the single letter

to

whenever the
bit
most significant
a one bit.
is
For arithmetic
operations, this flag is set
negative two’s
complement result is obtained.
Note that

result.

"I",

refered

is

set

mask. Areturn

interrupt

—

mask

:

344.6 -

_

Flag
Half—Carry

the half-carry flag and
Bit"H".five Thisis flag
used
eight

letter

is

after

indicate the carry

-is.used

adjustment.

the
out of bit threein
by the DAAinstructions
perform

In.

non=add operations
364.7

=

general,
and

the

to

half

add type

bit

to
operations
This
arithmetic
unit.
flag
packed decimal (BCD)addition
is undefined
flag state
after

on
instructions
sixteenbit operands.We

PIRQInterrupt Mask

Bit six

carry

refered to by the single
add

ie

is the FIRQ
letter
"F".
This
flag
manner
the I
that
flag affects the
interrupts do not stack the entire

interruptmask bit and

‘single

affects

the

4s

FIRQ

IRQ interrupt.
machine

refered to by the
interrupt in the same
Remember

state.

eo

hee

hat FIRQ

= Entire

3.4.8

StateFlag
Bit sevenis the
State flag
to by the single
and is refered
letter
"E". It is used Entire
by
the
to
only
returnfrominterrupt
instruction
|
determine
how
of the
onto
|

machine
much
an interrupt.
Two saved
state

at

time

the

of

(E= 1)

state

stack,

and

and

the

the

state

the

in
subset

which

was

all

have
registers
state
which
0)
in
(E =
flags have been pushed

condition
of
the E flag

is indeterminate
=

343

the system
pushed
defined:

states

atack
entire

been pushed ontothe system
only

onto

except

-

the

are

the
program
the stack.
In

after

an interrupt.

counter

general,

—

Assembler

|

3.5

Direct

~

The

|

|

Users. Guide
Register

Los

ORS

:

:

Direct

bit
that
is
to
used
Page Register is an eight
register
most
of
bit
bits
address
the
significant
eight
sixteen
the
It
is
refered
to as
by instructions
using direct
addressing.
"DP" register
is
and
to. zero
at
time...

provide
generated
the

366

RESET

initialized

Addressing
Modes

=

eh

adicropedesanse:

features

One. of
the
most
of the 6809
is
useful
its
wide variety
of addressing modes.
these.
The use of
modes
addressing
the
6809
to
permits
be:
programmed either as a zero address (stack)
or
as
a
one
machine,
to
address
In
addition
machine «
(accumulator)
memory
addressing modee,- several. implicit
addressing modes reference
internal
and status
Four
processor
instructions
registers
indicators.
have
been
stack
that
provided
that
explicitly
perform
reference
two
memory
through
registers.
stack
—

the

306.1

—

the

operations

pointer

addressing

Inherent

Inherent
addressing includesthose
specifiable
All data
options.
addressing
instruction

which
haveno- user
instructions
references
within
are

implicit
ee

itself.

:

:

-

Example:.
3-6.2

-

Aceumulators
Multiply.

MUL
SWI2

Accumulator

:

refers

addressing
registers

and

instructions
while
accumulators,

perform

Most

sixteen

bit

appended

to

some

the

mnemonic

Example: CLRA
~

Register

Register

to

data

|
Interrupt

contained within the

values

a
not generate
on
the
operations

The

memory

eight
perform

also.

accumulator

oe

-.

Clear

~

reference
bit

cycle.

A

operations

or

8B

‘on

the

apecification is Sormalty

root specification.

NEGB

3.663

Software

User

does

instructions

accumulator.

D

Do

-.

>.

Addressing

Accumulator
accumulator

|

|

Page

Negate

:

A
B

kéounulator
Accumulator

Addressing

refers
to
data
contained
within
one of
values
selected
pointer
registers.
The
registers.
or
register
must
be
as
A
explicitly
specified
instruction
operands.
list
consists
of
a
series
of
register
=by commas.
specifications, . separated
Some
having
instructions
addressing
implicitly.
register
the
two
stack
through
registers.
the

MPU

data

addressing

—

or

register
.

memory
‘Feferstice:

pointer

Example:

—

TFRs,
PSHS.

MoveData from D to IX”
Push

A,B,X

=

Fah

a

Registers

on

Stack

-

Guide

-

Users

Assembler
3+6.4

Condition:
Flag
Addressing

>=

Conditionflag. addressing
refers ‘to specific.flag bits

in:

the

used

for

the

condition

—

condition
of

flag

code

form

This

register.

A condition

operations.

©addressing

of

list

flag

condition
flag specificattons,separated
BWAI LF
“Example:
sec. Ws
5 -Menory
Nodes:
Addressing

366.

by

is

consists

a

of

series

commas.

Wait for IRQor FIRQ

Set

Overflow

the

Flag

—

~

nodes are used
:
Memory
addressing
specify
operanda
operacions
in
main
modes
are
residing
memory.: Several memory addressing
available.
that
is
— accesses
Immediate addressing
operand
contained within the
itself.
instruction
addressing requires an operand whose
_

to

on

_

an

‘Absolute:

exact

address.
is known at assembly
Indexed
time.
addressing
accesses.
an
at
an address
that
is developed
operand
of
of
one
from the contents
the
MPU pointer
the
most
of the
is
flexible
thus

“memory.

+a
modes
addressing
3-666

registers: and

:

“Immediate
to.
refers
addressing

This
which

ene

Immediate
Addressing

=

within
i

—

the.

“byte or bytes immediately
following the

mode ig used to access a value
that
not
be. changed during
will

is

addressing

data “valuethat 4e “contained

a

is

known at

program

specified
byPrefixing—
crosshatch, "#".

the

instruction

assembly

eéxecution.

opcode.

:

and —
Ps

time

Immediate

with
eg
operand
expression
|

o

.

ie mn
SS
Branple:
CMPD «#ADDRESS-—=—s
ADDRESS
So
See
3 67 Absolute
‘Addressing
|

:

*

|

1f

D =

“

1

data valuethat is referenced
eoluee.
by:teas ay
addressing
word or byte
“addres:
immediately following the instruction
—

referstoa

“

dre.

‘There
and

program selectable

two

of

modes

opcode.es

absolute. addressing: Direct

Extended.(Bothof these modesare
position,
Aepentlents
necengartly
‘Direct ‘badveaetag
the
uses
eight bit “tomedtatevalue.of the
—

instruction

the low

order

eight

bits

of

an

The
address.
high order
(DPR). In this
page register
way,
an instruction wtilizi:
one
of 256 _
direct. addressing can reference
a "page" of memory selected
locations
in
by the direct
page registers
sixteen
bit
Extended addressing.-usea the
immediate
value of the
as.
instruction
the. address” of
access
value

eight

as

bits

are

obtained

from the

direct

-

ee

data
anywhere memory,
In order to ‘specify
| absoluteaddtessing,
‘apectty
‘theaddressof.ke”
the
the data

in

data
_

and can

—

as

The
assembler . computes
operand field of the instruction.
the
specified.
address and compares the high order portion with the
contents
assumed
the
SETDP ES
of the direct page register
(specified via
directive) in order: to. determineabsolute
mode.af ‘the
paddresetag
.

_

-

Assembler Users

Guide

wishes
‘programmer
two

to

explicitly
or extended
direct
specify
addressing,
are
forcing
characters
The
provided.
sign
less-than
assembler
to create
an
bit
addréss.
eight
while
|

significance

"<"

forces

the

greater-than
bit
eight
bits
eight

">"

sign

address,
is

forcea

sixteen

a

is

a warning

BYTE __
_<LOWBYTE

LDB
TST

:

if

issued

insufficient...

Example:

bit

the

refers
value

Relative

~

an

and

the

sixteen

to

-128

offset

long

Test

—Ss_

to

addressing,

the

two

is

Indexed

bytes.

address

_ Specific

a

an

that

Byte - Direct
Byte -

Extended

within
the
offset
and

bit

Long.
anywhere

and

an

required

eight

or

short

and

may be

assignes |

BRA
‘BNE

LABEL
<SHORT

Relative

BEQ

>LONG

Long Relative

the

relative

used

produced
insufficient.

a

If

long.

message is
warning
bit
offset
is
Short

uses

appropriate.

as

similar

if

short

Addressing

Addressing

Relative

Addressing

—

value

register

contained
used

to

to

in

data

values

one of

the

whoseaddress is developed.
The
registers.
data
(called

MPUpointer
of the actual

-

develop the address
is
effective
address)
base
the index
called
~The register
register.
_to
be used
address
for a base
be
must
always
explicitly.
Certain
specified.
ihodes
indexing
the
have
to
use
the
ability
program counter
as
their
index base
Tegister
.

register.

.

_

.

-

Addressing

the

:

|

relative

addressing
memory.

forcing characters
A

instruction.

provides

relative
in

assign

significance

“Indexed
addressingrefers
the

contained

eight

explicitly

selected

Example:

from

an

addressingabove.

addressing

a

Clear

the
offset
normally computes
relative
addressing

wishes

=

offset

uses

can

programmer

3+669

is
of

and

short

absolute

determines

for

word
+127

or

to
.

or

assembler

either

of

case

branch address calculations
and
computed
from the updated program
counter

used

that

addressing

bit
The

_

address

byte

Short
relative
addresses
of

assembler

the

the

Addressing

Relative addressing is
to

In

Load a Byte

CLR >HIBYTE
3-648

address.

Indexedaddressing
requires
the

the

_

presence
of an
post
This post
byte
Specifies
both
‘type of- indexed addressing
the
to be used
and which
base
index
register
to
use.
If
an
offset
or
is required
address
by
the
indexing
Value
‘this
follows.
the
in the
byte
post
immediate
data
field. Several
byte

following

options

are

instruction

indexing
mode

opcode.

mode,

“Spaces
- will

The

require

available to conserve
assembler

minimun

automatically

object

code

both

execution

selects

the

space and time.

-

366-

time

and

instruction

object code —
formatthat

‘Assembler
UsersGuide
3.6.10 = Constant Offset Indexing
offset indexed addressinggenerates
effective address
Constant
to the contents
- by adding
fixed offset
one
of the
MPU
|

__

an

a

-registers.

of

The

offset

four

a

pointer

contained
and
within
the instruction
9
itself
follows
_
mode post
the indexing
are
byte.
Offsets
signed values, and may
be five,
eight, or sixteen
bits in length. The assembler computes the
offset
and
the smallest
The base
adequate
format.
register
Specified
If
the
an explicit
expression.
offset
size
is
"<" and ">"
desired,
significance
forcing charactera
may be
to select
eight
sixteen bit offsets
is

selects
following
offset
the
or

used

Example:

LDX

-

Constant Offset
from X
Constant Offset from Y
Forced 8-bit Offset

-

a
-

<0,0U-

>12,8

STX

"

respectively.

«LDA s«125X.
BRA

_

is

—

oS

Offset
Forced 16-bit
366411
=Constant
OffsetIndirect Indexing
Like most of the
offset indexing _
addressing
modes,
constant
may specifya singleindexed
of
level
indirection.
The effective address
is
oe
to
the
generated by adding the fixed offset
base.
value of the index
register,
and then using that address to fetch a sixteen bit effective
address from memory.—Indirection is specified “by
enclosing the
operand _
in square
‘the

brackets

expression

and

_

Any significance
forcingcharactersmustprecede—
nside of the brackets.

b

Ewample:

IMP_=——s[0,X)_—==—S—S—sGonatant
Offset tadirect
[12,0]
16-bit
Forced
Offeet
~
(366012 Accumulator
OffsetIndexing
EDD

ee

at

:

offset indexed addressing adds
Accumulator
register
to the value of an

-

an

to generate
this
address is then
specified,
to fetch the effective
addressvalue from memory. In the case of
A or B accumulators
the offset is a signed eight: bit value. For the.

effective address.
used
the
D

contentsof an.

the
index: baseregister

accumulator

If

indirection

is

the offset
is a signed
accumulator,
sixteen bit value.
Accumulator
offsetsare selected by specifing the accumulatorregister as the

operand

followed

by

the

index

base

offset
constant

register

specification.

Like

specifiedby placing
équare brackets.
operand
insideofindexing,indirection
OFFect
Emample: «STABLY.=——=—s=~=«é«
A
AcCmULatO
LOX DU
is

CMPB

the

bat

Ssbit

[A,X].

Offset
Accumulator
OffsetIndirect —

8

ae

Indexing
Autoincrement
indexed addressing
uses the value of an index base
Autoincrement
If
as
address.

register

the

address

is thenused
After the effective

incremented

by one

indirection is specified,
effective
this
to fetch the effective
address valuefrom memory.
address is
the
is
determined,
or

two.

Note

that

~ er

base

the

increment

register

mustbe

two if

Assembler

Users

indirection

. is

autoincrement
base

Guide

r

No

specified.

.

offset

Autoincrement
specification
by either

addressing.

register

increments
indirection

of. one.
is

permitted when

is
is
one

two

or

following
signs "+",

by
plus

selected

using
the

for

addressing,
enclosing
the
in squarebrackets.
specified
operand
LDA
0, Rt os
One
& AutoTactement
BR:
respectively.

two

or.

Like

other

forms

of

by

Exemple: 0,¥++
-

|

STD

Lou
3.6.14

[0, S++)

Autodecrement
base

address.

If

register

the
must

with

autodecrement.

and

subsequently
specified,

is

indexing.
preceding the base register
signs
"=", for decrements
of
square

one

or

as

the

this.

Autodecrement

|

|

CLR

LDY
STY

es

.

decrement

is

permitted

addressing
one

or

two

Like.

‘other.

—

by
minus
forms

the

.AutoDecrement by

_

[05-8]

Two

.

AutoDecrement
Indirect

|

Extended

the

ited enclosing operand
by One.
Autotecrement

|

Ome

effective
used
to

then

selected

two
respectively.
is speci
by

from

- two

is

by either

,

2

306615.

Indirect

uses

addressing
iedivection
brackets.

Example:

=

AutoIncrement

specification
or
one

"

in

by Two

is
address
from
effective
address value
memory. Note that
be two
if: indirection
is specified.
No offset

fetch

indexed

AutoIncrement

‘gubtracts either
addressing
that
value

indexed

indirection

value

of

-

Autodecrement Indexing

~

index

an

.~—-

Absolute
Indirect
Addressing

Extendedabsoluteindirect addressidg
uses

contained

in

necessarily

position dependents:

the

address

word

instruction
to
address
from memory.
fetch an effective
This
mode
a
addressing
allows the programmer to define
register
pseudo
vector.
IBM
(in
use. in
for
between
terminology)
program
communicating
Since the instruction
modules.
an
is
the

it
absolute address,

contains

:

Example: BITA. _

Extended Absolute
Indirect
(DEVICE)
3.6.16 Program
Counter
Relative
Mdressing
“

Programcounter

counter
-

register
the
instruction

within

uses
addressing
the
base

the

as

index

value of
value.

A

the
fixed

propia:
‘updated
contained
offset

value
to
to the updated program counter
the
effective
obtain
Tf indirection
is
address
“this
address,
specified,
is
then
used
to
fetch the effective
The expression
address. from memory.
value
the
in
specified
of the
value
effective
eource code is the desired
—
the
address;
that
offset.
the
assembler uses
value to compute
required
.
relative
the
"Pc".
Program counter
addressing is specified
‘by affixing
to
register
the
address.
of
other
forms
specification
requested
Like
indirection
4s
in
.indexing,
the
specified
by enclosing
operand
square
is

added

—

—

—

brackets.-

Example:

LDA

:

STX

BYTE,PC

Counter Relative
-—S=Program

_ {ADDR,
PC]

=

348

Program Counter

-

Indirect

Guide
Assembler
Users
4.0

-

Assembler

Expteseions
“consist. of
term represents

Expressions

one

Each

operators.
of

result

expression

—expression evaluation
—

the

relocation

upon.them.

used

expres@ion may have

any of
information

Lf

assembler

or

sixteen
is
also

sixteen

the

the

terms in

attributes

of

In addition

starred.

on

the

various

the

The

relocatable,

the

and

terms

star

will
attribute
attribute.

the

be

set

More

oe found in the chapter

can

directives. sapresaions
eee

complex

This

have

expression

or

the.

and

signed.

and_

bits

the relocation attributes,

to’

starred attribute.

the

assembler

terms combined with
bit
signed
value,

more

value.“may be absolute, : relocatable,

depending on

operators

a

:

.

on

‘Under certain. ‘eiveuaatences
or
may.be preceded
“exptessione:
used to-

by. special characters
‘surrounded
must be
understood
that

clearly

the expression
propry and hence must
hel

value

constants.

|

numeric

are

within
‘appear

an

of

constants,

Symbolic references

set
the

modes.
not part

It

of

expression.

location
symbolic:
references,
constants,

truth

or

character

have

~

when the ‘symbol is defined.
of
the
relocation
attributes

attribute
have

,

mode characters

not

in Expressions
-Terms
Termsin expressions.
may consist

coumter reference

specify addressing

these

Location counter

relocation
references.

program

counters

an

explicit

eurrent

=
=

Constants
‘always
havea relocation
attributeof absolute.
erences
Aad1. Symbolic
“Symbolic
of “a lost: geference:global
re erences.“may ‘consist
_

a

reference, op
a

references

consi

refer

to the

and

references
an

identifier

dictionary.

reference,

_

a

or

structure

yf an identifier
with no
definition
of
most local

of
consist
and ©refer

‘Parental

the global,
that

to

references

reference.

qualifier
that

identifier.

character

qualifier

identifier
consist
of

defined
the

Local

characters

(".")

Global

(". "y followed by
in. the
‘global.

parental © qualifier

and refer
to
("“") followed by an identifier
that
identifier
in the. ‘pa ent dictionary
of
the current.
‘Structure.
procedure.
refetences,
which may be
or. parental,
local,
global,
consist
of
identifiers
‘separated by. global qualifier
Someexamples of
are:
“syabot
te references

character
defined

characters.
somLocal -tetetence
_
=
global reference

8

Cee

: eee

wee

ee
ee

see
tet
:

a

ee

ttt

Se

ee

ee

+

=

ee

eee

=

=

ae

a

ee

parental

- a8 local

- 7777

Rodi

a

-—---—“

=

be]

structure

global

structure

@ parental

structure

PAGE.
PARAGRAPH
LEPTER
PERASE.
WORD.
-~-—

a

local

_

reference

structure

~
oo

me

Assembler

4.02

Users

Guide

Location

-

Counter

References

Location-counter

place

of

symbolic

a

location

references

reference

counter

beginning of primary
assembler
input.
source
line

of

source

code,

For
example,
references
have

consist

reference.

the

4.1.3

that

the

following

same

value

Numeric
the

ten,

having

Por

treats

letters

of

redix

In

assumed.

for

of

eleven,

change

counter

of

a

values.

location
counter
the
‘identifier

#;

the

designator

Examples

type
of

Decimal
Constant
Hexidecimal
Constant

Binary Constant

the

radix
designator
is
than
greater

radix
with

forth.

so

than

that

of

evaluation,
as

the

letter

Each

digit

21845

-<~

$5555.

ae

is

assembler

identical.

a radix

~-

"A"

the designated

the

decimal
designator,
a
constants
always have
relocation
numeric
constants are as follows:

_s=

Constant

of

optional

If

characters.
are
"$"
denoting
and
numbers,
binary
"@", denoting

denoting

absence

an

letters,

and

its

©"z"

Numeric

absolute.

Octal

BPL

value is less
purposes of numeric constant
of
lower case and upper case

numbers,

numbers.

are

not

value

string of digits.
are
specified as

"B"

ten,

Permissible
hexidecimal
octal

consist

constants

sure that
the

radix.

of

line.
current within
|

does

both

the

DECB; BPL *; DECA;

by a
digits

of
be

to

is

program counter at

the

program

statements,

in
a

of

oe

larger

checked

in

used

Constants

value

a

current

"k"
attributes

$0200
0,X+;

type
followed

character,

the

this

(which

asterisk

relocation

of changes

regardless

the

CLR

Numeric

~

the

and

for
statementprocessing
Note
value

in

ORG
LABEL

of

The value
those
of

are

“LABEL"):
|

oN

numbers

attribute

%101010101010101

@52525
|

4.1.4

Character

followed

the

constants

string

a

This
the

assembler
double
"et
accent

characters:
a

type

by

character.
and

Constants

Character

=

grave

character

character

precision
attribute

constant,
the

as

of
of

16

of

opening

an

followed

by

character

closing

quote

recognises
three
as
characters
quote
quote
""", the single
quote (apostrophe)
"’",
Any of these
characters
to.
may be used
begin
however, the closing
quote
must be the same
quote.
Character
are
constants
limited
to
a
and always have
or two characters,
a
relocation

bits

Examples of

character

constants are:

ae

"at
“AB
‘ABC’

quote.
the

.

opening

absolute.

consist
of characters

~~

Character

~-

Character

~~

Character

-=—

Character

constant
constant

with value
with

value

$0000

$0041

constantwith value $4142
constant
with value $4243 -

|

‘Assembler
UsersGuide
Quotes
successive

within

delimiter.

a

a

In

closing

quote.

mi"

case,

Some

examples

there

Character

~~.

Tf the

Motorola

consist

exactly one

ASCII character.
constant
value

character

of an

“-

os

~

pe

~-

be

a

$0027.

value
value

with
with

option

has

as

proper

character

as

character
followed

by

_

containing quotes

$2727

_

been

selected,

character

quote
the
upper

—

nine bits
of the
seven bits have the
No
closing.
quotes
are
compatable character constants are:

and
character.

zero,

are

two

character

$2727.

value

opening
single
In this
case,

using

quote

$0027.

value

with

ASCII value of the following
permitted. Someexamples of Motorola

tA

always

be denoted by

with

compatability

constants

different

constants

constant
constant

Character

must

a

of character

Gharacter

~-

ee

Ree

-

either

constant
Character
o>
constant

eb

may

constants

by using

or

==

ee

.

character

characters,

quote

the

lower

with value $0041
Characterconstant
value

Character

constant

with

Character

constant

with

value

$0020.
$0027_

4.1.5= Truth Constante
_

Truth value constants consist of the reserved
symbols TRUE and
FALSE and have values of 1 and 0 respectively.
The
relocation
attribute
value
of truth
is
constants
always
absolute.
In expressions,
truth
value operators. treat
non=zero
value
any
as being equivalent to the

—

_

©

8

truth

value

4.2 =

in Assembler
Operators
Expressions

These
in

TRUE.

99.

fhe assembler upports a

operators are usedto

ee

ee

wide

variety

evaluate

eee
-

of operators

in

expressions.

expressions at assembly time, and —

addition,
several
operators can be passed to the linker
—
program to
expression
In
either
evaluation at link time.
case,
are
operators
That
processed in precedence
order.
is,
operators
with a higher
precedence
value are processed before operators with a lower value.
A
and precedence
complete listing of operators
values
can be found
in
table
4.1.
In the following
example, the value of VAR2 is multiplied
by
the
value of VAR3,and the result ie added to VARI:
cause

than add
has higherprecedence
_-VARIAVAR2@VAR3
multiply
_
_

_ Each
sixteen

binary

term

of the

source expression is

evaluated

bit binary relocatable value during expression

to

a

signed,

scanning.

These

to perform
values are then passed to the expression evaluator
the
©
required
arithmetic.
Note that
expression evaluation always produces a
in
‘Sixteen bit result even if terms
the expression. are undefined.
terms
Undefined
of
zero
have a value
and a relocation
of =
attribute
OE
eS
cones

absolute.

eS

oe

~

4-3

=

oe

ea

Ss

-—

Assembler

4.3

Users

Guide

Grouping

=

a

Operators

The
two
alter
the
order
of
in
which
expressions

parenthesesand

precedence

of

be

demonstrates

0007,

El

0006.

£2

12;

«=RQU.s14243.
EQU

4.4 = Arithmetic

to

order

have

that

a

operator.

example

By

GROUPED

sO

(14273

used
the

These operators
of any
other
The following
deep.

processed.

than
higher
to
levels
nested
up
ten
may
beuse of
the
parentheses:

Parentheses

Seven

grouping
operators are
by explicitly
stating

as

evaluation
to

ate

value

used

are

expression

GROUPED

|

Operators

operator,

arithmetic.
"=", returns

operand.

If

negative
operator,

sixteen

bit

number

"+",

is

essentially

operators
as

overflow

an

are

The
provided.
unary
negation
the
its
two’s complement of
result
of the negation, the maximum

its

result

is

as a
returned

occurs

as

the

a no-op.

result.

The

unary

plus

‘The

binary addition
operator,
"+", and the binary subtraction
bit
operator,
"-", perform sixteen
two’s
complement
arithmetic.
overflow that. may occur
produces
a warning
_Any
but
is
message
otherwise
The
ignored.
operator,
multiplication
"*",
a
performs
sixteen
bit
If
signed
of
the
multiply.
the results

have more

multiplication
is
message
The division

sign

and

modulus

of

is

then

operator,

"/",

performs
determined

a

sixteen

significance,

a

truncated to

sixteen

bit

signed
the rules of

the

of

sign
to

zero.

arithmetic

0003
_FFF8

OOOFFFF6
0032

- £2
E3
-E4
ES

.

OOO0F

£6
E7

Value

Truth

and
is

The sign of the remainder
the
dividend.
If a divide
by zero occurs,
A
few

El

=

division

result.

:

operators:

0005

=

"2", performs a signed

operator,

as

the

set

4.5

bits

result

the

of
is

remainder
as

sixteen

and

warning
bits.

division

with
result
the
by
algebra.
Any
discarded.
Note that a divide
a
by zero
produces
warning
the maximum possible
substitutes
sixteen bit number
the

the

Temainder
The

than

produced

examples oe will

the

illustrate

for

result.

returns

always
the

use

of

the
result
the

the
same

|

is
seven

:

:

EU

ee

43

Eq.

~7

EQU

5410
5-10

PLUSUNARY
MINUS

|

EQU
EQqU 5¥10—
EQ
100/17
EQU
100%]7

UNARY

-

-

ADDITION
SUBTRACTION

MULTIPLICATION

DIVISION

=~MODULUS

Operators
*,

The

value
unary truth
are used
operatora
to convert arithmetic
values
relocatable)
truth
into
values.
The
truth
value
operator
"/" has
the
value
TRUE 1f its argument
and
non-zero,
FALSE
ie
1f its
is
zero.
argument
truth value negation operator
‘The
performs
"!"
the
truth
value
conversion
in
the
same
and then
two

(possibly

resul

manner,

te

,

=

hunt

“

invertsthe

Users
“Assembler
Guide
‘The

absolute.

values

value TRUE is equal

may

Similarly,
be

FALSE.is

used.

in

value.

operatoraene
9001
Ew

~~

to

one,

with

to

zero,

equal

arithmetic

a

relocationattribute

also

of

absolute.

Examples

expressions.

of

‘These

the truth

oe
|

VALUE
“TRUE
0000uma EQ 112—
de
6 Relational
Operators
fz

=

FALSE

”

VALUE

-

“The six

ftuery,
operators
relational
the.

and fight operands.
If
of the expression
is

relational
TRUE,otherwise
in conditional

are. used to compare
their left
condition is satisfied,
the value

it

is

FALSE.

These

particularly useful.
assembly and for
of the six ‘Yelational
directive. ‘Examples
operatoteare:
0020

wT

colo

QU 32

Lo

E16

0000

«RI

00002

‘EQU HI<LO

-R2
equ
«R30 EQU.

0000

0001
0001

.

0001

=

Bigs

-

operators.
with

the ERRIF.
:

a.

“HI<@Lo
HTasi
-ATL=LO

LESS

EQUAL
TO.

|

==R4 EU
RS

HAN
‘LessTTHAN
OR

use

|

are

TO
EQUAL

EQUALTO
GREATERTHAN.
NOT

EQU.SsHI@>L0

TO"
OREQUAL

EQU |

HI>LO GREATER
THAN
order. to eimplity
the coding
of relational
“operators;several
variations
on
basic
In

‘syntax are recognised as valid.
The Less
Than or
Equal To operator m. “be
specified as "<=" or also as "ac", the Greater
Than. or Equal To
operator as "=>" and also as ">=", the Not Equal To.
Operator as "I=". "es", and also
as "><".
The ‘€onctionof
these

operatorsis exactly eaaesonly.theirsyntax:
composite
is different.
407 Bitwise
Logical
Operators:
the

~

“Fourbitwise logical ‘operatedare “provided
s ‘The unary ‘Nor
operator teett produces.
as its result
the one’s complement of ita’
operand.
The three
binary
‘are
oR
Inclusive
the
operator
operators
"|", the
2 He
Exclusive OR operato
and the AND opérator, "&".
These
operators
perform their ‘respective
o: peratons
bitwise
two
upon their
The
operands.
will clarifytheirfunctions: es
examples.
Following
OFor M1 Ew SOror
OOFF
M2
Ew
SOOFF
FOFO Vi gQU.
Hla
wor
|

ee

=

EQU M1IM2 BINARYINCLUSTVE
oR
EQU
MI“M2 —s-BINARYEXCLUSIVE
OR
O00OF==ovy
AND
MI&M2
BINARY

OFFF

v2

OFFO

V3

-

Ban

=

G5

Assembler

4.8

Users

Shift

~

All

of

the

bit
are

checks

six.

the value
The shift

count.

negative

OS

Operators

specifying
bit

Guide

following

shift

count

is

made

for.

diagrams

operators

be

shifted

count

is

to

illustrate

the

right
meaning

signed,

converted

into
—

arithmetic
the

overflow

‘CoO

COECECECET
Tees
—

—

TI

<0

‘doce

Arithmetic
bits

shifts

<+

LeftArithmetic
shift

shifted

following

out

examples.

of

RightRowt

AD

—LeftRotate

ey

supply

sign

:

Right Arithmetic Shift

<%

shifts

shifts:

.

aR

Logical

No
The

+>

%>

—

zero

bits

the
value
extend
to fill
the value

illustrate the

shift

all | positions

for

being
the

shifted.
vacated

Rotates
bit

operators:

Ml

EQ

$FoFO

7878
C30

=6VlV2.

BQU
EQU)

Mi>>l

LOGICAL RIGHT SHIFT

FEIE

Mi<<2.

V3
v4
V5

EQU

Mi+>3.

LOGICAL LEFT SHIFT
ARITHMETICRIGHT SHIFT

Mi<+4.
ARITHMETIC
LEFTSHIFT
RIGHT ROTATE
MI%>5
ROTATE,
VG6—CEQUSsM<%60—-—~—s«s:~=C*«CSEET’.:
EQU
EQU

vacated.
the

use

“™e
positions:

FOFO

OFO00
8787,
3C3

a

significance.

Lilgicar
Lett
Srv

be

with

forth.

so

<<

b15

b15

lost

shift

left

a

and

Shit
Right
Logical

be

CUOCCITICIT
b18

or

operand
the

left

specifying

>>

b15

b15

that

different

six

the

operand

shift

right

a

with

binary

are

and

a

OSES
noe

_
ae

Assembler Users Guide
ee

he Qe

_

“Logical
connectives

binary

are

-

_

2

Logical
connectives

expressions into

complex

truth

Logical AND, "&&", and

oR,

Topical
connectivesaret:
0010 «vl kW 16
.

6020

0020.

0000
0001

=

v2
V3

"J".

to join

connectives

Two

Someexamples of
oe

_ EQU320

BQU

LX RU.

«= =
«LY

used

operators

values.

Vici

|

|

VimeV266V2=eV3
AND
“LOGICAL
OR

EQU.«-Vie=v2||V2==V3

LOGICAL

truth valued
available,

are

the

use
;

—

:

of

Assembler

Users

Guide
Table

~

Assembler
Operator

4.1

~

Operator

Precedence

~Fanection
“

—_

~

Precedence

‘Left Parenthesis
Right

..
ee

Parenthesis

w

.

-

bb

~

Unary Plus...

.

.

Unary Negation...

Unary Bitwise

.
Not.

*

.

¢

e

*

.

~

*.

2

*

*

&

e

.

2

*

*

*.

*

@

Negated

Addition
Pk Arithmetic
Arithmetic
Subtraction

to

&

*

Truth Value
wm Unary
Unary
‘TruthValue
~

«©

oe

*

*

@€

»

*

&©

*

*

©

ee

.

ee

*

e

a

*

8

6

#

«

*

le

oe
*

TT

wee

*

ee

12
12

eee
-

—

«

Tl

ll
ll
HY

~

eo 6

&

e

*

6

ow

e

¢@

e&

*

we

e

*

@©

s

&

*

&@

*

«6

~

~

~-

Arithmetic

Arithmetic

aN Arithmetic
~

-.

<+

~

<2

-

>>

~

+>

~

Left

Left

o

Multiplication
Division

(Remainder

Modulus

Left Rotate
ee
Right Logical ‘Shift:
ew

a>

-

-

-

RightRotate

*

Less

Relational

Equal

e

.

.

8

@

8

e

@

@

*

ee

Than

~

Relational

To

Greater

-

Not Equal

©

©

&

©

e

Equal

s

e

ct

owe

@¢

ss

se

«6

6

ee

e

*

»

+

«

e

°

wee

*

9

*

9

*

=

16

10
10

e

«

°

woe
e

ca

ee

*

e

aes

e

*

#

ae

ES

8B

2.

8
@

¢

*

8

8

*

+

oe

°

*

.

e

°

*

*

.

s

*

oe @

€

7

°

*

7

6

-6

e

cd

«

2

8
8

‘

*

*

*

Than

RelationalGreater

Relational

ee

«

©

To

or

*

*

¢

Equal

(Same)

-

e

e

©.

8

or

(Same)
~

cy

*

eo

«6

*

Relational Less Than
Relational

@

ee

Shift

..

*

A

—

Logical Shift .
Arithmetic Shift

Right Arithmetic

©

@

8

Than

e

To.

*

s

¢

#

oe

To

*

ee

*

7

6

see

(Same)

7

(Sane)
+

Bitwise

AND
Exclusive

Bitwise

Inclusive

Bdtwise
~

-

-

=F
~

Logical
Logical

*

e

Connective

*

e

S§

eee

OR
oR

te

*

5

AND

Connective

OR.

s

*

Ss

ee

e

4
3

wee

2

©

1

ee

IN

~

48

«

Users Guide

gssembler

5.0

OperationMnemonics
The
following ‘pagescontaina detailed escription
of. the 6809
These
consist
operations supported by the SWTPC assembler.
—
operations
6809

=

-

of

6809

mnemonics designed
consists
entry

extended
and _a few
Each
programming practices.
of
mnemonic, a description
a list
of affected
condition

primitives

structured

assembler

operations,

simplify

to

table

function

the

and.

the

flags,

modesfor. that operarions-

of
valid

of
each

—

the —

of

the

addressing...

Sel Condition
Flags

:

-

about which condition
‘conditionflag liet ‘contains.
information

The

flags

an. operation. alters

and

Mask (FIRQ)

is

and

Interrupt

(E)

flag

criteria
the

Interrupt

is

|

Unless

and

-

>.

Fast.

State

valid

on

.

the
the

©

after an ‘interrupt .— The slow maskable
interrupt
(IRQ),
—
of the
software
_
(NMI), and all three
interrupts
interrupt
the Entire State flag before
MPU
on
registers
pushing the
the —
the
entire
Only the fast maskable interrupt
(FIRQ) clears
state
then
pastes: the condition flags and the programcounter on.

set

--@tack.

flag

‘mentioned,

the

are unchanged by the operation.
flag register
undefined in the condition

stack
only
fon-maskable

(SWI)

for

result.
Mask (IRQ)
The Entire

otherwise . specifically

-.

the

and

|

omy

the stack.
5. 2— Extended

:

Maemonics

mnemonics are. noe:strictly‘speaking 6809
"Severalof the supported
of
and
instructions
operations,
6809
|

consist

‘syntax
marked

different

with the
been
provided
extended
All

‘either
|

from

sake

of

"ext" after

notation
the

for

the

Motorola

multiple

standard.
the assembler

program clarity
“produce error.

will.
mnemonics
has.
o
ption
‘beenget.
compatability
eas 6800Yantly
-

codes

_

will
the

-

for
/

(except

of

into

assemble

operation
does note

6805).

~multiple

sets the ‘Zero
:

.

if

certain

In

:

-

cases,

these

whenappropriate while
‘flag,
:

on Seb

©

operations

sequences: designed to emulate —
in
all

instruction

is exact
6800 operations. ‘Emulation
MUL
is
6801
upward compatable.
instruction which

specified
the

the.

have.

They
convenience.

6800 amilyimemonicoperation

has

course

coding

are

messages the Motorola’

Woenonics
been provided
for

support

Full

mnemonic.
and

©

of

or

‘These instructions

=

the

cases

The
6801

except.

6809

MUL
—

operation
:

Assembler

Users

Guide

ABX

Add

DESCRIPTION:

Add

ACCBInto

IX

the eight.

accumulator

instruction
CONDITION

CODES:

is

Inherent

ADC

Add

DESCRIPTION:

Adds. the

X

provided

wsigned
index

for

6801

and

the

N:
3
Vi

compatibility.

‘earry flag

Set
three

register.
if

memory
byteinto

an

carry

bit

operationcauses

the

a

from
the ALU.
Set 4f
the bit seven of the result
is Set.
Set ££ all
of the
bits
are
Clear.
result
if
the
Set
causes
two’s
operation
a
arithmetic
overflow.
Set if the operation
a carry
causes
from the
in

|

C:

order bit

in the ALU.

ADDRESSINGMODES:

, Exténded
Inmediate,
Direct,‘Indexed

ADD

Add Without

DESCRIPTION:
CONDITION

CODES:

‘This.

with Carry

eight
H:

8B

the

in

value

register.

-

bit

CODES:

the

Not Affected.

ADDRESSING MODES:

CONDITION

bit

into

complement
high

Carry
Adds memory into register.
H:

4
operations,
bit
from
three
carry

For eight
causes.
a

bit

sixteen

‘WN: Set

if

operations,
the high order

Z:
V:

if

all

Set
Set

bits

the

if
if

order

ADDRESSING
-MODES:
Immediate,

operation

bit

of

result

the

For

is unaffected.
result

are

causes

the

in

a

is

Set.

Clears.

two’s

“complenent

from‘the
causes a carry
high
ALU.

the
bit.

the

flag

overflow.
operation

arithmetic

C: Set

of

H

oberation
ALU.

the

set

bit
the

in the
Direct, Indexed,Extended

=~

Sad

oS

.

AND

AssemblerUsers Guide_

oe

Logical AND

DESCRIPTION: Performaan
‘the contents
Hs NotAffected.
CONDITION
CODES:
Nt
Set
-@t Set

logical

eight

bit

of

register

a

ee

bit

seven

of

4f all

bits

of the

if

ANDoperation between _
the
contents
of

and

the

result
result

if Set.

are Clear.

“Not Affected.

MODES:Immediate,
ADDRESSING
Direct,

Indexed,Extended

Code Register
AND
Into Condition
“Logical
DESCRIPTION Performsan eight bit logical AND
between the
Boe
code
and
register

oe

eondition

places the
CODES:
CONDITION

aoe

_
-..

the

result

in

immediate

byte

and

the condition coderegister.

condition codesare set to. the result
The
the
of
AND of the
8=bit
condition
code
bits
logical
current
with
the immediate
“Any
operand.

dmeluding the

interrupt

operation...
MODES: Immediate
ADDRESSING

masks

en
_

a Bag

condition

may be cleared
ee

code bit
by this

ees
ne

Assembler

Users

Guide

Arithmetic

ASL

Shifts

DESCRIPTION:

Shift

all

oo

bits

left.-Bit

bit

of

the

of

the

loaded

is

zero

order

Left

operand

with

operand

CONDITION

CODES:

Ht
+

shifted

is

Undefined.=
Set

Set
is

if

the

if

all

if

not.

order
C:

into

the

.

2: Set
Vi

The

a-ozero.

flag.

to

place

one

the

high

earry

|

es

high

bits

bit

order
of

the
shifted

the bit
to
equal

the

the

of

result

result

bit

shifted

high order

bit

Set.

Clear.

‘are

of

out

1s

high

order

bit

into

the

high

the

bit.

the

Loaded with

of

original

the

operand.
ADDRESSING

MODES:

ASR .

Accumulator

Arithmetic

DESCRIPTION:

Extended
Direct,Indexed,

,

Shift

Shifts

all

sets

the

operand.

Right

bits of

the

operandore lee

right

and

from
bit
zero of the original
flag
The high order. bit
is held
constant
to
s complement
sign
two*

carry

provide. ‘Proper

extension.

CO)
CONDITION

CODES:

H:

Undefined.

N:
Z:

Set

if

the

Set

1f

all

=.

sign bit
bits

of

the result

of result

are

Vi Not

C:

ADDRESSINGMODES:

Affected.
Loadedwith bit

zero

of

the

Set.

is

Clear.
original

Direct, Indexed Extended
Accumulator,

operand.

,

(=

5a4 =

—

"Assembler Users Guide
BCC
es

4

on Carry
ve ‘Branch

Clear

DESCRIPTION:Mente
the state

of

_

tf

ae

:

Carry

is

clear.

|

the Carrybit

andcausesa branch

NotAffected.
CONDITION
CODES:
Relative,
Long
ADDRESSING
MODES:
Relative
a

ee

Bes

Branch

on

CarrySet

DESCRIPTION:
t the state of
Teste
—=>
EEE
theCaery
a branch
bitandcauses,
at Carryis Bt.
Shad

fo

CONDITION
copEs:— Net

‘Affected
ADDRESSING
Relative,Long Relative
MODES:
BEQ se

:

:

on Equal
_—-Braneh

DESCRIPTION:
after a ‘subtract
ue Weed
or “compare
operation,—
thie
instruction will
is
branch
if the.Pestacer,equalto
he Resery
operand.”
CONDON
copzs:Not Affected.

_

oe

os

ADDRESSING
Moves: tive,LongRelative
1

BGE

ee

or
on Greater
Branch
Equal

DESCRIPTION:Used
after auberaet
or. compare.
operationon(signed.
a

binary values,
egister was

operind«

|

|

this.

Anstrucion will

(Sreaterthanor. _eqaal to
:

oe

ches

the
oe

S

|

he Memory
ee

CONDITION
a Notstfected.
copes:

MODES:
o2 _
ADDRESSING
Relative.
tong,
Miactehy

branch if

:

Assembler

Users

oe

Guide

BGT

Branchon

DESCRIPTION:

Used

Greater

after

binary

ve

:

subtract

a

or

‘this

values,

register was greater
CODE:
CONDITION

Not

ADDRESSING
MODES: Relative,

LongRelative

BHI

Branch if

Higher—

DESCRIPTION:

Usedafter.

CONDITION

the

than

a subtract. or

binary

the

register

if

will

Affected.

unsigned

operation

compare

instruction

values
this
was higher

if

branch

memory
operand
«

on
compare operation
branch
will
instrucion
than

the

operand.

memory

_

LongRelative

Relative,

BHS

Branch

DESCRIPTION:

When- ‘weed.‘after
binary. values,

if

register

Higher Same or

was

2a subtract
this

or

will

instruction
than

higher

or

unsigned

compare on
same

ae

branch

if

the

memory

operand.

CONDITION
CODES:

Not

—

.

Affected.

MODES: Relative,

LongRelative

BIT

Bit

DESCRIPTION:

of the contents of e
an eight
‘pit logical
AND
“Performs
a

Test

register

and a

qemory

condition codes:accordingly.
register are hot affected.

CONDITION
CopES:

H:

N:
Z:

Ws
C:

-

_

the

CODES:

ADDRESSING MODES:

ADDRESSING

signed

on

operand

and

contents

The
a

mee
NotAffected.

Set
Set

if

bit

if

all

geven of the result ‘te Sets.
bits of the result are ear.

Cleared.
Not
Affected..
.

:

Direct;‘Indexed,
fxtended
Immediate,

ADDRESSING MODES:

546

=

modifies
of

the

—

gS
ae Set een

ES

‘Assembler

BLE

UsersGuide

Branch Lessor Equal
on

|

DESCRIPTION: ‘Usedafter a subtract or compare ‘operationsigned
on

binary values,
was
register

‘

operand.

this

less

-

|

instruction will branch if the
than. or. equal to., the memory
4

:

CODES:Not‘Affected
CONDITION
.

Relative,
LongRelative

|

BLO

“Branch
on Lower

DESCRIPTION:

Whenused after
pubteact:
on unsigned
or compare
binary values, this instruction will branch if
the.
Fegisterwas lower than the memory operand.
a

—

CODES:
CONDITION
|

:

NorAffected
-

MODES:
ADDRESSING
S

BLS _

Relative
Long.
Relative,
on Lower or Same
Branch
ce

: ‘Used after
"DESCRIPTION:

48
a

a

‘de. goupure
wabtrace.

unsignedbinary values,
the

register

ees

was

instruciton will branch
than or
(sameas ‘the

this.

lower

‘the

operand.me
menory

CONDITION
CODES:_ Not‘Affected.
_

MODES:“Balacive,
Relative
ADDRESSING
Long
—

pales

on Less
Branch
"DESCRIPTION:“uedafter subtract compare
operatio on signed
binary values, this. instruction
will branch
Af _the
&
ee Tegister:
was less
the memory
whan
operand
1

a

or

‘CONDITION
NotAffected.
coves:
SS
ee
MODES:
Relative
ADDRESSING
Relative,
Tong
ae

Assembler

Users

Guide

BMI

DESCRIPTION:

Branch

on

Used
this

after

Minus

operation
will
branch

an

on

instruciton

signed
if

binary
the

negative.
CONDITION CODES:

Not

values,
is

result

Affected.
.

ADDRESSING
MODES:Relative,

Long Relative
|

BNE

Branch

DESCRIPTION:

Used

Not Equal

after

a

instruction
CONDITION CODES:

ADDRESSING
MODES:

to

the

Not

Affected.

Branch

DESCRIPTION:

or

branch

if

the

compare
operation,this
register

is

not

operand.

memory

Relative,

BPL

subtract

will

equal

:

Long Relative

on

Plus

Used
after
instruction

an operation

will

branch

CONDITION CODES:

Not

ADDRESSING MODES:

Relative, Long Relative

tf

signedbinary values, this
the
result

is

positive.

Affected.

BRA

Branch

‘DESCRIPTION:

Causes an

CONDITION CODES:

Not

branch.

unconditional

Affécted.—
ti}

MODES:
_ ADDRESSING

Relative,

BRN

Branch

DESCRIPTION:
_

Never

Does not
essentially

CODES:
CONDITION

Not

MODES:
ADDRESSING

Relative,

Long Relative

cause
a

a

branch.

NO-oP.

Affected.
Long

~

Relative

3-8

-

This

instruction
:

is

_

AssemblerUsers Guide
BSR

Branch

‘DESCRIPTION:

The updated
system stack

Subroutine

to

program counter

control As. transferred

and

address.

effective

puted. onto the|

is

to.

.

—

the

:

coves:‘Not Affected.
‘CONDITION
Relative, Long
cS ADDRESSING
Relative
MODES:

as

-

BranchOverflow

BV”

Clear

on

—

s

teste the
‘DESCRIPTION:
.

:

flag
state of the overflow
branch if the over flow flag is sets

:

a
andcauses

m

NotAffected.

CODES:
CONDITION

MODES:Relative, LongRelative
ADDRESSING
BS

Set
onOverflow
‘Branch

DESCRIPTION: Tests the state oFthe overflow flag and causes |a
branchif the overflow flagis clear.
"CONDITIONCODES: NotAffected.
=

RelativeRee
Relative,
Tong:
Eze

on Zero
Clear
Branch

|

)

|

Teststhe state
the zero.
‘DESCRIPTION:
flag
af the
‘flag is clear~

ae

|

-

and_causes| a branch

of:

zero

-

-

conprrton
coves:: Artected.

ae

oe

“Relative,LongRelative
ADDRESSING
MODES:
|

|

Branch
onZero‘Set
the.state of thesete zero elas
DESCRIPTION:‘Tests
andcauses
zero
off

_

flag

the.

is

oe

CODES: Not.Affected.
CONDITION
ADDRESSING
hongRelativeoo
MODES:
—

eo

Relative,
Oe

page

a

‘branch

Assembler

Users

Guide

cee (ext)

Clear

DESCRIPTION:
©

Explicitly. clears any

flags.
of
-

CONDITIONCODES:

This

operation

condition flags

All

is

It

State

not

CLR

Clear.

DESCRIPTION:

The

register

H: Not

specify the

to

memoryis loadedwith zero.

or

is:

compatibility.
cleared 6800

Affected.

N:
Z:

Cleared

Vi

Cleared

Cy

Cleared

Set.

‘Extended
Detect; Indexed,
Accumulator

CMP

toa.
Sapteced
Menory
Compare

,

Compares
a memory‘operandto
|

specified

regi

codes.
CODES:
- CONDITION

Hs

Uadefined

N:

unaffected
Set if the

Z:

Set

V:

Set

1£
if

all

and:

r

operations.
bit

the

of

result

.

result

the
are

Set

if the

mostsignificantbit

of

the

lamadiate,
Direct,Indexed, Extended

5a19

<

is

Clear.
two"s

causes
operetton
subtraction dia not cause
a

the

~

a.

©

Specertons,aaa.”

bit

high order

the

of
condition

sets appropriate

eight
of

contents

the

for 16<bit
bits

overflows
C:

ADDRESSING
MODES:

The

for

ADDRESSING MODES:

» DESCRIPTION:

are

Entire

;

List
Condition

carryflag

condition
syntax version
MPU

as operands

specified
possible

flag.

MODES:
ADDRESSING

CONDITION
CODES:

subset of the
is an extended

ANDEC.

cleared.

-

Code

Condition

Set.
oe
.

)

a

ALU.

complement
carry

from

see

Users Guide
Assembler
_
-

Complement:

DESCRIPTION:Replaces
-

its

a

the
of
contents
The
one’s” complement.
:

¢

register memorywith:
carry flag is set for
or

a

-

6800
‘Compatibility.
CODES: fi: ‘NotAffected.
Q CONDITION
WN: Set 1f bit seven of the:réanlt:is ‘Set
oe Set if all bits. of the result:are Clear
:

Direct, Indexed, Extended _
MODES:
ADDRESSING
Accumulator,

—CWAI
DESCRIPTION:
-

andWaitfor. Interrupt
Clear
an immediate
ANDs
‘theCWALinetruction
byte. withthe
code
(which may clear
ition.

register
_
interrupt
state
the
on
the entire
machine
When
systemstack, and then waits for anno interrupt.
further
on-masked interrupt
machine_
occurs,
),.

e8

stacks

—

be.

will

saved

before.
routine.
ng

to

|
the
vectoring

h
interrupt:
_ CONDITION
copes:
onditioncodes.are set. to” ‘the. “pasult of the
bit logical
fer

AND of

the

.

current condition

code
—

| conditioncod
stn operandsAny

"ADDRESSINGMoDES:I

=

DESCRIPTION:

or pos
"Shouldbe. ‘used Taicer an ‘ADD
the
A
iatee,
wich resultheldin he Bee
“aebit sevenof eebutt a dete”
:

ve

8

‘Setif all bits of the Teeake are (Clear.

ADDRESSING
MODES:

Assembler

Users

Guide

DEC

DESCRIPTION:

Decrement

Subtract one from
affected, thus

the

not
in

CONDITION CODES:

He

Not. ‘Affected.
Set

if

Z:

Set

1£ all

Vi

Set if

bit

seven

bits

two’s

a

occurs.
Not Affected.

ADDRESSING
MODES:

Accumulator Direct,

EOR

OR
“Exclusive

DESCRIPTION:

A

DEC

flag. te

carry
be

to

a

loop-counter

precisioncomputations.
multiple

N:

C:

The

operand.

allowing

:

.

of result

is

of result

are

Set.

Clear.

complementarithmeticoverflow
Indexed, Extended

into
operand is exclusiveORed
memory

an

register.

CONDITIONCODES:

H: Not Affected.
N:

Set

bit

seven

of result

is

Set

Z:

Set 1f all

bits

of

result

are

Clear

V:

Cleared.

C:

Not.Affected.

if

ADDRESSING MODES:

Immediate, Direct,

EWA (ext)

Interrupts
Enable

DESCRIPTION:

the

the contents
stack, and waits

system

All

is

an extended

condition

specified

as

operands

possible

List
Condition

the MPU condition

of

of
for

syntax

the

MPUregisters

an

interrupt.

version

of

on

This
OATS

masks)
flags (including “interrupt

‘to specify

ADDRESSING
MODES:

Wait

and

stacks

operation
‘CONDITION CODES:

Extended, Indexed—

Explicitlyclears aay subset
flags,

eightbit

the

are

Entire

cleated.

State flag.

It

is

not

_

.

UsersGuide
Assembler

EXE

Registers
Exchange
DESCRIPTION: Exchange two registervalues:‘Note‘that‘eebintecs
\

_

may
dees,

|
-—

-—

only

be exchanged
bit
with
eight

Sixteenbit.

with

registers

of

or

ean bie,

like

Size,

sixteenbit with.

:

oe

a

coNDrTroN
coves:NotAffected.
MODES:
ADpeaSsINE
Register
Z

ex

(ext)

“
Rete,
from
Procedure

the
instruction
loadsthe eysteestack ‘potter
DESCRIPTION:
pointer,
then
Exit

from

oes

the

user

ptevious

user

¥egisters,

-.

stack

and

‘the

stack pointer,
program counter

the
Feturnfromsub roubine):
foe
CODES: NotAffected.
CONDITION
_

-

and

pulls

the

(which

system

the

ee

_

specified

:a
effects
ae

stack,

|

List
"ADDRESSING
MODES:
Register
_

S

nerenent

DESCRIPTION:

Thecarry ‘flagte

.

thus

allowing INC

to

be

used

4

in Multiple
Precision computations.
oop-comter

“CONDITION
cope:

Set if bit seven of

Set if
Vs
oe

all

Set if. a

occurs.

t result is ‘Set.
e

bits

of the FYesult are

two”s

arithmetic
Sempenett
overflow

Clear.

—

se
Os

o

ly

oe

ADDRESSING
MODES:
Accumulator,
Direct,
Indexed,
Extended
OMB

es dump

ae DESCRIPTION:
Beas ‘eontrolis
address.
|

CONDITION
CODES:

to
transferred
effective
thee

NotAffected.
Mopgs: Direct,
ADDRESSING
Indexed,
Extended
= 5-13
-

0

AssemblerUsers

Guide

JSR

Jump to

Subroutine
—
progtan counter
DESCRIPTION: The updated
stack

system

effective
CONDITION CODES:

control

and

AG

ee

eos

fades

.

is

pushedonto the

transferred

is

to

the

into

the

address.

Affected.

Not

_

ADDRESSING

MODES: Direct, Indexed
, Extended

LD

LoadRegisterfromMemory

DESCRIPTION:

Load ‘the
“register

CONDITION

Hs

CODES:

the addressed

memory.

Affected.
‘Not.
4f
of Loaded.
data is
seven

Ns. Set.

_

of

contents

bit

Z:

Set

V:

Cleared.

C:

Not

if

all

bits

loaded

of

data

are

Set

Clear

Affected.

ADDRESSING
MODES:Immediate,Direct, Indexed,

Extended
FSO

_

LoadEffective Address

LEA

,

effectiveaddressto date using the memory

DESCRIPTION

Form

CONDITIONCODES:

not
data
Load that.
address,
addressing modes
the
itself into the pointer register:
“Ueaxand ‘LEAY fFect the Zero flag to allow use as-

the

compatibility.
and for 6800.INX/DEX
to
Zero flag
and
allow
LEAS do. not affect the
stack
while
to
the
up
cleaning
returning the
egounters

.

flag
6800

as

“LEAU

=

=

a

parameter

to

a-

calling

routine,

and.

for

|

Zero |

. for

Al other condition
compatibility.
flags:are unaffected.
INS/DES.

ADDRESSING
MODES:
— Indexed

“=Se14

-

Users Guide
Assembler

ee
ee

"Logical
‘Shift

SR
——=s

DESCRIPTION:
Oe

re

Shifts
Left.

ae

bits

all

Bit

Left

dnto

the

one

bits

seven

»

is

ee

ee

—

TUB

of the
of

the

with bit
a8:Loaded

.

ns

1

ee

all
‘Set
‘3Set
if
carry
Tai llavea than

Bit

with a& zeros

carryflags

“Undefined.
_
CONDITION
CODES:
: Set
seven
if bit
if

the-‘operand.placeto. the

of

loaded

is

zero

the

resultare Clear.
of. the high order

out

the

esultie Set. ee

carry

seven

;

‘te

bit

into the high: order bite

|

of he.original

Opera

Direct, Indexed,
Accumilator,
ADDRESSING
MODES:
oo
Extended

UR

Right
logical
‘Shift

DESCRIPTION: forms zerological
into
a

Shifts

a

the

flags
into theEAEey

-

MODES:
ADDRESSING
-

see

Direct,

~

5-15=)

righ
hig

iif

ift on the operand.

jer

-

bit

operanc

and bit

-

‘Extended
Indexed,

zero

Ae

Assembler

Users

Guide

MARK(ext)

Mark

DESCRIPTION:

The

System
Mark

list

instruction

and

ADDRESSING

pushes

user
the
then loads

Stack, and
CONDITIONCODES:

Stack

the

system

Not

Affected.

specified

the

stack

pointer

the

user

stack

onto the

register
system
from

pointer

stack pointer.

©
eS

MODES: RegisterList

MUL

DESCRIPTION:

Aceumulators
Multiply the unsigned binary numbers in the A and B
Multiply

accumulators
CONDITION CODES:

H: Not
ON: Not

Set

the

if

bit

ADDRESSINGMoDES:

Inherent _

REC

Negate

Replaces
Note

CONDITION CODES:

ADDRESSING MoDES:

that

the

dD.

the

of

result

case

also

replaced

carty

cleared.

H:

Undefined

N:
Z:

Set

V:

|

B accumulator

of the

with

its

(Hex)is replaced
overflow

sét.

by itself,

and

two’s

sy.

bit

seven

Set 1£

all

bits

Set if
Cleared

the

original

of
of

Sets.

result

are

Clear.

the original

80

=

(Hex).

was 00
operand

Accumulator,
Direct, Indexed, Extended

516

—

oaks

is
was

in

is
is ©
eS

result

operand

_

complement+

Uo

1f

-

ee

is Set.

and only
by iteeif
The value
00 (Hex)
case
only in
this

|

if

Clear.

.

operand
is

are

—

seven

the
80

this

C:

in

Affected.

_

DESCRIPTION:

result

Affected.

Z: Set
if
all
bits
Vi: Not Affected.
C:

place

and

accumulator.

(Hex).

oe

Asseubler
UsersGuide
No

OF

>

Operation
that causes: the
singlebyte instruction
No...
incremented.

This is a
program counter

be

to

other

contents are. affected.

registers
CONDITION
CODES:NotAffected.
_
ADDRESSING
MODES:
“Teherent
or

memory

—

“Inclusive
OR

f

OR Spetation
‘between
an eight
Performs
inclusivethe
DESCRIPTION:the
memory —
and.
contents of
register

|

bit

operand.

a

_

and the result is stored.
dn the register. aS
He HoeAffected.
—
CONDITION
coDES:

of result

Set BAe
‘NiSet 1f£ high order bit.
of result
bits
Z: Set if all
are ‘Clear
Cleared

Ve

Not

oo

Affected.

Indexed
Extended
Direct,
Immediate,
ORinto
Inclusive
an

eight

the.result
This

and

‘register.

masks.

URE
SREAE
The
=

woud
bit.

bit

placed. in

is

the

condition code
to

instructionmay be used

condition codes

eight

eis code
register,
inclusive.
ORoperationbeteean:

logical

oe

;

get to

are.

the
the:peselt. of code

current condition code
.Any condition .
interruptmaskscan be. set by ee
OR of the

bits with he immediate
bit including the

operand.

t

operation.

oes

mediate
ADDRESSING
MODES:

= 5-17

set

=

.

Assembler

Users

Guide

PSHS.

on the
Registers

Push

DESCRIPTION: Any
stack

subset of
pointer

itself

stack.

CONDITION
CODES:

the

System

Stack

MPU registers

pushed.

are

except

the system

onto

the

system

Not Affected.

Register List
ADDRESSING
MODES:
PSHU

Push

Registers: the User Stack

DESCRIPTION:

Any

subset of

on

stack

CODES:
CONDITION

Not

Affected.

Pull

DESCRIPTION:

_

from SystemStack
=
Registers

Any subsetof
stack
Stack.

_

MPU registers except the user
pushed onto the user stack.

are

—

ADDRESSIG
List
MODE:Register

PULS

the

itself

pointer

the

=

MPU registers
except
are
from
pulled

the

pointer

itself

system

the system

CONDITION
copes: Unaffectedunless the condition
coderegisteris

pulled
ADDRESSING
MODES:
POLU

/

from

the

stack.

system

—

Pull

Registers
fromthe User ‘Stack

stack

eet
of the
pointer itself

DESCRIPTION:

MPU
are

registers except the user
pulledfrom the user stack.

CONDITION
CODES: ‘Unaffected unless the
condition
coderegister is
pulled from the user stack,
-

oe
_

MODES:
ADDRESSING
RegisterList

a

5u18

=

-

Users Guide
Assembler
7

ed RET. (ext)

“Return
‘Registers

The return inatrudtion
fiedpeslacey
pulls.the apect
“DaseazeTion:
effects a retars
148t

and

the

counter

program

(which

from

etack~—
fromsubroutine) the system

f

Not
Affected.
CONDITION
CODES:
List.
Anos MODES:
Meptoter
.

‘RotateLeft
ate all
bits
rough the carry

oy

of

flag.

operation.

with bit seven the
of original
coded
operand
Direct,
unalator, Indexed,
1‘Betended
v

:

place.left
‘the paced‘one.
—This18 a ‘Sinesbir,
white

-

5-19

-

Assembler
Users Guide
ROR

|

_ DESCRIPTION:

|

Rotate

Right

Rotates

all.
the

through

operation.

CONDITIONCODES:

He
N:

bite of the operand right | one. place .
carry flag. Thies is nine-bit‘Shite:
a

:

RotAffected.
:

Set

if

bit

seven

Z:

Set

if

all

bits

V:

Not ‘Affected.

Cr

teauieis Set.

of
of

result are. Clear.

:

of

Loadedwith‘bit sero

opetend
original

the

«

ADDRESSING
MODES:

Direct,Indexed Extended
Accumulator,

RTI

from
Interrupt
Return

DESCRIPTION:

,

The. saved iaschiae state

stack

and

“program.
CONDITION
CODES:
_

A

control

is

is

returned

técovered frouthe svsten.a
to. the ©
Hapervepend
a

fromStack
Recovered

ADDRESSING
MODES: Inherent
RTS

Return.fromSubroutine

‘DESCRIPTION:

conttol
Program
the
calling

from

CONDITION
CoDEs:

Not

is

program.

the. system stack.

Affected.

“ADDRESSING
MODES:
Inherent

returned

from the subroutinete eo

The return

addressie pitied
a

; Assembler
Users Guide S a

‘Subatract torrow

SBC

with

.

oh
Subtracts the contents of memory ard. the borrow flag”
DESCRIPTION:

0m

the

contents

in

that

Set Af

all

of

a

‘Fegister,and Places.
Fesult
Fegister
CODES: HM:
CONDITION
‘Undefined.
Nr Set if bit seven of the resslt is ‘Set.
|

Bb

a

-

uM ®et if

0
ae

the

—

of the

bits

result: are Clear.

the

-

complenent
operation
operationtd notcause carry from
in
causes a two" 8

overflow.
Set if
the

Be

a

:

the

Bae‘peven
ALU.
Direct;

tate,

Tetended
Indexed,

sce (ext) o 3 set
Codes
DESCRIPTION:
| — Repttctety
sete any

Condition
subset
of theMPO
eeeitton
oemee
CONDTTYOW
copEs:
condition
flagscs
a0Speviends
are ‘get.
ds
to
State
ee

SRE

Elo

Thi:

:

|

-

2

not

pousibie spactty
| the Batire

ae ‘{netruction
trans: ms a
value
tabit

in

flag.

‘signed binary

the B accwhulator tuto

a signed

ixteen-bitvalue in the a
the “high
detest

all

bits

of the

fem

is Set.
ot the.‘feacit,

eesteate Clear
«

y

ae

- S21

&

'

Assembler

Users

Guide

ST
|

IntoMemory
Store.
Register

DESCRIPTION: Writesthe contents of an MPU

a
into menory
register

|

location.
— N:HeNotAffected.
a

- CONDITION
CODES:

Set if

Be
os

j

Clear.

a
Co t Affected.

.

ADDRESSING
‘MODES:

Gata:was Set.

bits of stored data are

.

¢

So

seven. of stored

bit:

‘Setaf all

a

Direct,Indexed,
‘etended

Memory
Register
Subtract
from
ee =
DESCRIPTION:
pebteeeta valuein memory‘from
the contents
:
of
‘Fegister.
SUB

the

-

a

:

CONDITION
CODES:

oe
Uhdefinea.
“HN:Set if the
orderbit
Hi

Z:. Set

all

if

“Vi Set_if

€:

high

the

‘ovetflow. |
Bet if

the

the

of

bits

operation

of the result is ‘set.

result are Clear.
a _two’5.

causes

did not Gause;
‘operation
a

ce

‘complement
carryfrom ae

‘thehigh onderbit in the ALU.
ADDRESSINGMODES: tens
fate,Direct,Indexed,‘Betended
:

8

‘SWI

os

Cantar

otto’the systen
oe
tetradies" the SHI.
trans
Nebr
CONDITION’
CODES: Th mq add rie
mask
bakeare et oe condition
“fla

DESCRIPTION:

f the Si

are

stack and coritrol

pushe

|

is

ea

oe

Ue

oe

Fegister.

“unaffected.
ADDRESSING
MODES: Inherent

1

DESCRIPTION:

2
Software
Interrepe

frégiscers
All. of the‘MPU
‘are
stack.

and

vector.
CONDITION
CODES:

pala onto.the. wat

control ois transferted
Seen the me
:

Not.
Affected.

oe

=

ce

:

2

AssemblerUsersGuide
_ ADDRESSING

MODES:
_ Inherent
3
Software
Interrupt

i.

SWI3

of the MPU
=a
are pushed
DESCRIPTION:
onto the yates ge
pegiataxa.
and
@tack
control is transferred
ca
thecaltheSTS
re
wee
e
conpr
“Woe:
108‘CODES:
Affected.
¢

Me

ee

ADDRESSING
Moves:
teherent
|

External
Event
Synchronize
SYNC
instruction
DESCRIPTION:
SYNC

oe

to

When
a

-

-

is

S¥WCing state,
stops.
on an interrupt.
wWedtes
the

SYNCingstate

interrupt

is

©

interrupt

ee

executed,the MPUenters s

instrucitons,
Processing
When an
and

and
occurs,
processing

—

clestetenabled, the |
interrupt _
perform the toratragt
routine. Té 0)
is masked, the.
simply

the
Tf
dontinues.
precessor
will

the

oe

|

ieee

recente
to fhe next
continues
fantrection. ee

ote

+

CONDITION
cones: toeAffected.
te

sferRepioter
Register
to

t

DESCRIPTION:

‘pentecer

to. a. dee
Registers may only by transferred between
ta of
like
:
size; ie», eight
bit Bo
eixt
en bit to sixteen

4
,

Source

2

Not Affected

Si

Register

.

—

ete

ination

a
ane

Bets

o

Assembler

Users

Guide

TST

Test

DESCRIPTION:

~

of

the magnitude

data

No

Nb

Set

2:

if
bits
Cleared. all

Vt

Ct

data

written

is

an

—
immediate

the condition.
to memory

registers.

Hs ‘Not.
Affected.ae

CODES:

a.

"ADDRESSING

operand.

The TST instruction conceptually adds
of zero
to
the
value
and seta
operand

codes” accordingly.
CONDITION

bit

eight

an

Lf bit

seven

Set

Not

6S

of
of

the
the

En

fesult.is Mets

result are Glear+

Affected.
o:

—
j
MODES:
Direct,Indexed
Accumulator,
‘Extended:

BEL

Assembler

6.3.1

Users

The

-

The

Cuide

Attribute _

Star

directive

equate

to
define
a
may be used
star
symbol having the
This
flag is used by the FCB directive
determine
whether.
to
two
of data
one or
bytes
need be generated.
The
star
flag is selected
the equate
by preceding
a
operand with
crosshatch
.

attribute.

star

is
flag
has
expression
flag follows:

also

its

star

CR

0200

4D 53

47

0203

OD 0A

00.

ERR

--

The

-EQU.

Generate

ERR”

"MSG"

FCB

CR,O

Error

an

to

generate

the

ERR

directive.

assembler
will
This
directive

generate
error
to call
may be used
be used
in
conditional

number

65,

665

conditions.
recognised

ERRIF

~

=~

used to
of

the

~

6-6

FAIL
The

_

Motorola

6.7
-and

may

The
may
be

important
directive)
constants
while

have

either
to

ard

character

has

—

os

is
or

FalseCondition
=
TooError Memory Used

been

provided

to

the

ERR

used to

Much

Sy

es

for

compa

directive.

with
tebility

areas of data

define

more operands, separated

string or an
character

assembler

that

constants

maximom

strings

into truth value.

Bytes

character
a

certain

SP

#=>§C700
Programmer
Signalled

is identical

Constant

character
a realize

have

detect

Error

an

and

one

to
on

ERRIF

065~

directive

FCB

source

purposes, the mnemonic "FAIL"
a

ERRIF 45<12

_

directive

Form

=~

order

convert
arithmetic
ERRIFdirective follow:

Generate

FAIL

in

assembly

Error.

of

areas

expression
is
value
true, an error
ERR
in
the
directive,
otherwise
the ERRIF
Note that
the unary truth value operators "?" and
an
expression
a

***

assemblers
FCB

=

—

certain

an operand, which
to be a
requires
it expects
the

_

ERROR

for
the

Error
Conditional

a

C702
C702.
***%

encountered,
Programmer Signaled
to

compatability

error

is:

as

ignored.

Examples

an assembler

If

generated

directive
is
"/"
may be

attention

operation.

directive

expression.
is

Some

this

Generate

ERRIF

message

For

for

Flag

Star

.

used

may

ne

Message Text
End
of Text

|

ig

The

-

FCB

When

also

of.

.

directive

truth-valued

-

$200

Set

purposes.

is

.

MSG

#S0D0A

ORE

The
operand —
the star-

the

oe

documentation

or
code,
exceptional

in

.

0200

=

"#".

symbolic
reference
use
example of the

any
An

kee

OD0A

6-4

character,

selected
if
flag set.

may

strings
are

precision

of

of

any

length.

§=2.

=

be

~

at a
by commas.

expressio
(such as u

not

equivalent.

sixteen

bits

(two.

racters)

—

If

an

.

fe

a

considered

operand
begins.with one of the
to be

a

character

string

ee

oe Guide

quote
charactersit
assenbler
The
data. generated

constant.

.

of ’ ‘the ASCII characters
eoneists
enclosed
If a
by the quotes.
be
quote is
enclosed within the character string
to
ite
be
presence
must
indicated
by two successive quote characters.itself,
|
the.
For
example,
string
JOHN’*S”. consists of six characters,
and could also be defined
by
1
alternate syntax "JOHN’S". If character constants ate requiredusing
as
|
the |
not
must.
be
the
are:of810:ax expression,
they
term
in
firet.
.
*
the
gan
unary plus
ee

be. weed to force
| operator
expression
entire
the
be
can
evalustion,
expression
s
i
is
this
an
of
Pevenienet example
technique givenlater. enclosed
If the operand
does “not begin with a quote chacaeted,
at ie
oe

or

an

ate

expressionand

is

permitted and

have

ally generates be
Double byte
Character,
case,

of data

byte
forced
by
character

as

to

a

sixteen

for

zero.
each

value

the

one

significancemay

">"

evaluated

bit

ae

pl

The

chpeaseiog.
forcing

using the significance

the first
of the expression
two ‘bytesof data will be
generated. —This
is

and

in

|

this

For.
etibedding
adtrecs oresinsideof Sonstants+ feature _Beefuh

_

=

Tf an.

s

express
yes of
oneox ‘two

ae
whether

sion

:

ab os“or

:

hae, the eter
“Herective
{s

the: expresaiex
value

ta.will
or

be

used to determine
If the value of the

generated.

~128 and less than
+528, then
For
all other
values (ineluding
of data
are generated. Note that the star
ough the use of the forcing character 'te'

equal to

ated.

_

re

“Several
| of ale Fesaapective
exeaples
|

ae
fim!‘Bet
a
Set
‘Stat
Flag

teyte tytes

‘Character‘String ©
in String

Quote

CB
}

$B

(tate 16) Character
aN"
"Character
_ >500_
Forced
500

saat,
|

Eepretsion

Expression _

Significance7

13

One ‘Byte.

ae

less

two

“18,,,15 Null jOeetends
CR, ET
heeOperands
flag Deed

oo

«CR a Forced
SS
te Soipaebilityoption1s specified,either ‘on the

Bignificance

de

os
eee

or through the opr directive,
character.
string
+ Termsbieginning with a quote character.
are
‘S$ and
in
dre used
expression the significance of | each operand is forced to_

daition,
gee bitsSeagate
Of ekestate
—
characters.

‘ee

of

the “star flag or the forcing
|

'

Assembler

6.68

-

FCC

character.
not

OE the

considered

6.9

44
43
67

65 66

FDB

have

one

for

“efgh"

directiveis”used:
operands,

more

6-10

The

them

the
directive

a

to

and

is

will

normally

define. sone

used

BSZ

single

directive

optional, and

is

used,

if

is.

it

omitted,

of.

1s

to.

operand

0019

00

OO1E

OA OA OA

00

00

LIB

fero.

| the FMB
area is
wemnory
like

.

:

BSZ)

of

beterencens:
Some
sapienee
PORE

0000. FMB 5

FiveBytes

ENB

:

Re

oo

| Three‘Bytes oe

3, 10

library Inclusion
The
LIB directiveie ‘aged
~

be

aasumed to

‘processed, exactly

:

Gell

define

value.
first
length of the tiemory atea to be defined While the.
the byte of data to be stored in the memoty area

the

forward

the

word

ahd
memory
of
the
FMB.
operand

The

and
since
no
is
second
specified, the
zeroes.
The
initialized
to
first operand of FMB (and
not
contain
or external any
FMB directive
follow! -

must

to
oes

reserve areas

8-bit

properly

~~

finelude ade

to

as
In effect,
language input
Inelided
the
the
_file replaces
library directive
in the assembly. Only. one
is
a
and it must have
permitted,
valid disk file name format.
inclusion
yee
files may be nested, and upto
ninety-sine: library:
files —
fay
be
in
one
If
no
included
as@embly.
is
extenaten:
_

_

by commas,

directive

directiveis” used to.

definee
is
operand

second

If

&éparated

expression.

defines

operand

The

QuoteDelimiter

Multiple
Form
Bytes

~~

. FMB

initalize
directive
second

of

ooh

FMB

-

|

string. soneexamples

define 16-bit. wordsin acmorys
- te ‘may

to

This

operand

addresses.

_

Ftc

FormDouble
Byte

-~

or

each

character

the

FCC/ABCD/SlasDelimiter

68

The. FB

:

-

of

follows: :

directive

0013.

part

as

QOOF4142
-

character
in.
etrings

directive
is used to ‘define
memory.
starts with the first
character
string
non-separator
after and
opcode,
with
terminates
the
‘second
of that
occurrance
These
delimiters
ASCII
may be any printable
character, . and

FCC

FCC

Characters
Constant

FCC.

: The character
are

Form

<~

The
the

Cuide

Users

source

to

the

—

assembler.

a

source
_

:

« A meri
extention ‘Txtis, assumed
-

ae library

file

6809

17

sant,

an

of

ozoD 91. BY

_MOVE
LIBS ‘suBS
BSR

92.0

93.
101%
2.01...

7069

A6

80

706B

A7

AO

=

4.01.

SUBROUTINES

MOVE

LDA 0,%+

5.01

STA

=

6-4

0,

<

Y+

ae

:

6612

Name_
Module
er
ae
The 2 NAM
been “provided”
‘for
ae
ola
with
Seeatebaitty
pri assemblers.

source

wy

he

|

Assembler

Guide

Users

-

14

6

-

ORG

~

multiple
supporta
relocatable.
or.

counter sections, each

program

The

absolute

be

may

Origin
Counter

Program

assembler

‘The
which

Set

~~

@

- mechanism
section,
used to define:
program counter
If
a
origin.
label 1a spe ified or the ORG statement,

©

of

name

615

PAG

-

-

.

a

of

-

directive &used. to force

=

Counter
‘Progran

BUF

_

the

If the
“pageoption has not
“Pp” option-on the assembler

listing.
the

the PAG directive is ignored
in
effer ‘the PAGdirective
and

the bop °
deeondler’
been
selected,
either
by
to

line
command

appears

in

the

the

via

or

listing.

OPT
t

from.
itself.disappears
oe

:

Begin Procure Block
block.“Tethe
a proceture
The proteduredir
teweedto begin

6616

PROC

-

~ procedure’
-

1s

ofcestiye

Resolute PC”

$0400

pagination is
Programlisting.

ee

operand of this

Start Nes Page

page

specifying
Statement,

used
specified

is

‘a

—

The

label

—

$0200

2

“0400

to

this

references.Sons examples of

external

follow:
Statements
0200

and

no label

If
ounter section.
The
ts selected.

the progre
ABSOLUTEprogram coun‘
the
forwar
must not contain
the

as

of.

is the.
set its

directive

ORG

a

—

statement

bel, then that label is used as the name of
has
If the dictionary
already. been
jtéd.
of t
‘ive is. considered to be a continuation.
creates
no label
jure.
with
atatément
re *onnn” is a. four-digitnumberused

‘has:

the

dictionar
procedure
this dis
then
~
definiion.
previous
A pr
mamed. “*
‘“@ictionary

defined,

make

dictionary name

the

"the symbol table uniess
definedin
Symbols.
Zs

al to the

referenced —
as entry defin:

be

eannot

declared
—

label

yyusing: ‘the colon character
is appear in the dictionary

terminator:

to

ae
pidg

ire be
ia

ufiless: they are

block.

the

explicitl:
":"
ae

that

peeceerrs

contast

Tt

directives, the:‘prog:
accutane.
aoe)weedwithtake
should
" proced
piacea
to

.

|

t

e

the

pr

pecouate
dictionary
resdlved,

current’

reference
then
its

searched.

oo dictionaries

has

not

parent,
If

the
are

been

ard.

€0.

referencehas

searched.

on,

wed

DY.

(eal led the ‘local
dictionary). 1
the

until
ati

parent dictionsery
the

‘not been

is

searched,

globaldictionary
then

resolved,

hag.

|

bee

the.ves

_Assenbler
Users
Cut
The
great

ability declare entry. pointsand
to

aseistance

Parameterization
_

serese.to

in

can

be

writing
modular,
well
defined
and

subroutine

aries.

An

follows:

tes

have

to

block

labelsis.
local
structured

of

controlled by) prohibit
example shown.
She. use 0

| COMPARE
BYTE
PELRowen
WITHX
SOURCE
FIELD.
ENTER
Y
=>

*>

woe

Bos

TARGET FIELD

PTLD‘LENGTH
Declare Shiny
Point|

PROC
LDA 0,X+CMPA 0,Y+
FAIL

BNE
ves
FAIL

—s
=

sd:

DECB

+

Get

BNE cup
°

a

RTS

—

Source

Byte.

CompareTo Target
Not Equal,

Exit.

Decrement Count—
‘Loop TH11. Done

ExitTouring

“opr to
"cme"
‘alsocauses the spibey
and
_

qui

The procedureis terminated

‘thesedictiona

unlessthe ot opt: tes are
:

not

Printed

and thenpioteads
current local ‘at soabey
“thresh

dictionaryuntil

the global dictionary ha
localdictionary
up throug

-

andonlythen:ate the

Assembler
The

..

Users

Guide

order

in

multiple 4 public.

dictionaries

defined.
More precisely,
public dictionaries
in
in the same
order
which
public directives
Tf duplicate
in one or
labels
more
appear

in

not
in

appear

the

used

a

PUBLIC

29.

WARMS
EQU

$cD03

30.

PORLF EQU

$CD24

CD24

86.

which

one

|
Library

|

Warm Start Addr
|

Do

CLE

;

:

stream.

input

s

Start

,

=

—

unpredictable,

—

|

not

An

to.

example
a CD03
ee

is

searched

general

dictionaries,

public

is
‘finally. résolve the reference
of. the use of a publicdictionary is
shown:

be

will.

searched

are

are

END
|

0209 BDcD 24 9
020C 7E CD 03 92.

IMPWARMS
QUAL. Begin a ‘Qualified ‘Block
Data

-

Oe 18

;

QUAL
directive is used to. ‘start
The
must
directive
have a label

The

dictionary.
of

data

qualified

must

by the

its

by
example
An

shown:

is.

LDA.

52,

B603 55

Cr6C

Symbols

name.

8146

MPA

53...

0355

035F

(“we

=i

of

wealteiad| structure

a

yn

if

See
«.

‘RECORD
‘QUAL

BR

field which te used as the defined
inside of a qualified
using
the name of the symbol

Value
RECORD.SEX
Get Sex

*

ee,

internal qualifiedata .

an

referenced

be

structure

references

G69

dictionary.

qualified

the

structure

and

“Back to BOS -

~~

~

name

Feed

Do Line

PCRLF-

JSR.

Available
A

Start

:

= RMB

SEX

86.

dE

«Oe.

(tst*t*é«C

END

SadReserve
Menory
Bytes
os RMB
RMBdirective
ie used to teserve plock ae
‘The

a

initialization
must

is

fet

contain
of

length

the

performed

any

8§

Field
83. MAME RMB «1002=~*«<“‘:é‘«éR

of

reserved

memory.

os

sf

and
specifies the
references,
no
Since
reserved.
object code is
the
require
code any space in

or external
be

forward

block

the

on

- byt
‘memory

memoryto

generated, RMBdirectives do not
oF, aes
‘Some

ae

follow:

oTAlae Spamp
lee

is

9100 =-—“‘«~*‘i*é‘«SRB
_ 0200 we ey
BUF RMB ~ 10000 Large ‘Buffer —
6.20 ‘Sere
Set
Direct PagePaeudo Register
—

-

|

SETDPdirective ‘is used to inform
“The
of

contents

the

assembler

direct.

decide
generated.
to

should

be

field

is

‘usedfor

page

whether

The most

0}
the assembler.
“presumed

This

register.
direct

or

significant eight
calculations.

addressing

value

extended

bits

The

is

by.

of

the

© oO
ddreseing

absol:

the

express
:

expression|

ae

ee

have
:

attribute
relocation

the

of

absolute.

In addition,

it

ee

= coe
SES

containforward externalreferences
is.
directive‘in ‘no a
Tt
‘to.tealize that. the SETDP_
Ampottant.
or

a

oe

UsersGuide_
Asseubler

It. te the
contents of the direct page register.
the
to
that
insure
values
loaded.
are
proper
“programmer” reaponsibility
‘The
directive
affects
~
time.
only
cecution
the :
this. _Fegserer
OF

affecta the:
|

:

acttal

8

a

sou

eS

of the use.

An
ts 8decision‘process,
ele

Ad
ome “teertacd,
Addr

Lead
‘MSP
LDA ACTA>>8_
oe
A,DPR
TFR
LoadDirect Page
SETDP
ACIA tellAssenbler
.

WAIT

heceiver:
——i‘titst:*:*é«Seck

ESRA.
BOC

Get Status

ACTA

LDA

S

WAIT =

if

soo

Rothing
set (eitheron.—
‘optionhas ‘been
compatability
OPT directive),
the
uses the
SETDP directive
ts or the value
to set the direct.page
pects|as
LDA| ACTA+L OREData ayte.

2

sight

feast

register.

_Beeretet:
BPC
=

6621

the
“asewablet
Lis
St

Vege
“

—
generated.
the number of

-

it

|

perand ‘8
is

4

specifies

tne

and 48 eae.
it eatina oe
‘pecitied,
operand is” re
:

i

the

=

622 TT
Ldeting.

11

a

the
on

"P™ option
the
TTL direc

the
—
-

shits
‘to
te used
not been selected eithe by apecifying~

primeingof the

miand

é

|

thetnew pagehead

tk

able:

or

line or via the OPT directive,the
eption

is

active,

» @

new page of

Users Guide

Assembler

“

fe?
023 USE

UseProgram
Section
Counter

~

“the: USEdirectivecauses

counter
-

section:

“No label

operand ‘field musteither

the
assembler
nay be specified
be a single
asterisk,

selec

to
on

a

use

'#"

»

active

|

is

Message

section...

ie

Notice

that

the

_teferences‘to
a,
“a

8E

36
he

Se
241D IF 1202 6
00.

(-241F

D6 200

2421
2423

OF
20 =8
A680

24252704

.

section

a
Pack a Word

10.

SA

1.

13.
FS

°

String
4

TBE
PACK Lyx.

cope

‘OoRD
CtCSTR XY

op

AT AO

9s.

2628

data.

LEN.

RL
X+
LDA OO,
GRAM:_«
BEQ LOOP
t—=<—s«<S

2o29 OC 2

Ooze

In

2

Bea

002c
002.

the

S
2

te

on

no previo

menory locations.

different

code.

addressing.

(2428
242-26

counter..- Tf an
is

made the

ection, an error

ically
connected
the

following
a
procedure references
8 area.
static
The two
kept distinct in memory by using multiple program counters.

-@ pure

are

2427

is

a.

—

Sections

241A
241A

there

name

current program
tion,
and the

‘and the
£
Produced
‘ARSOLUTE
counter
selected.
program

ae
example,
-

If

program.

tatement, andof the _

Or the

program counter section.
If a name is
t
specified,
counter —section ig made the previous program counter
named. section then becomes: the
currently
active progr:
asterisk
is specified,
the
program
previous
counter sec
-

currently

a new

Ah

STA

INCL

OOP

OO,

ECR

BRE

CRAM

USE DATA
RMB ik
RMB. 32
USE

- 6-10

-

ai.

utilize
+

_

direce

es

ee

PUBLIC
DICTIONARY

|

:

NO

PARENT

©-++|-

“Poeer"

po

4

SYMBOL
O10" pee
“MOVE”

PROGRAM.
COUNTER

wn
“ABSOLUTE”

a
iE“SYMBOL
PATTERN
25 SYMBOL
“SAMPLE” qe
Poddel”

eee

|

:

06

co

- }

S

es

LOS

)

-

:

|

TRI 8 4:
TROCEOURE
“EDR”
DICTIONARY
_ SOL
at

—

oe

Srer
_Sras0t
we | Mo

og

| program
sample
The
ie NeSubioot
shove (packed
ine*EOMR"
thet is utedto. convertPs
from
decimal
decimal).
re Tut

BCD

to
decimal points,

of commas
, dollar si

insertion

-

numbe:

display format, completewith

and

whatever.

This.

illustratesseveral of ‘thecapabilitiesof ‘theSHTPC
ee
assembler.
Theabel SAMPLEat a definesan.ordinarysymbol
and appears.
in the
MAIN

with
along
in

its

EG
progres
ne

“deeclenaty

value, 0000, A small subroutine MOVEhas been included, and
ic dictionary via the PUBLICstatement at
the
"B". ‘The label MOVEee.
referenced
publ a
found
symbol
in the dictionary
"
foes
Su
end ordinary
tatement at
“D"
terminates
the
public
cue
dictionary. .
EDMK
is
included via the LIB statement at mene
PROC statement
The
at "F" defines a
focedure
named ‘MAIN.EOMK
dictionary
and
-EDMK
a
~—
in
symbo?
‘the ‘global=:
jonary. The symbol definition represents an
explicit
as dendted by the coton on the
label. Labels within
are
the.
0
and appear only in dictionary
«6the:«procedure
ca] labels
Som
are DIGITand NEXTshown at "G".
One
additional »“interesting
the
local
UL FLAGthat is created
variable
on.
stack
by subroutine
_ the
is.
variable
fromthe user stack
at "HS
ave a eerie.offset”
as
‘shown
0

“placed

|

‘WAIN.
*PD0001.
ie
Thesubvaut

|

vent

he

-

EUMK

,

a

are

|

loca

2.this.
s

E

pointer,

referenced
mht

Me

es

San eS

Oe

pee:

a

Ces

6

|

ee ae

-

as

_

San
LIOSYgsaudav
“LISI@
“aS
§TOI@
"-SEA@
SE
(SVL
OE
meaBLVA
SIDIG
ova€ID1@
HIONTT-AIDIG
LUG DVL
ee
BELOVEVHD
MALOVEVHO
SUIG
_.
OVid
ENTGNOY
Ee
fifaa‘ats
SSVakG
GDA
iio1a
uaq¥o
MOVE
SLIDIG
LIO1G
‘nta‘SITI
SHOLS
—-MONEINOD
uro1a
AGVAWIV
Waco.
HAG
SdAL
MQNVOTAINDIS
'TIld
WNOd
IIOSV
AOT-HOIE
SONLINOD
SE
UVINOME
Las
MOTH
INVOLEINOIS
NE
YOSHD
rosy OVIdee
HHL
‘LIOIG
WHYS
-aaHDO
avax
AVC
HAQM
“gO1S
LVHA
Eas
Ny.
NIVH
OMI
LHDIY
LID10
WaINTOd
2a0
ELOVEVED
BONVOLAINOIS
ENSIANOD
MWHLIVE
ISWla
MELNTOR
Bee
‘YNOIH
“AMOI
‘OWNZ-NON
SETE
¥Z00
‘owszZ OWNZ
Goa
go
sece
£200
“Tvynba
asiva
0000
To00,
INVOLATNOTS:
ergs 129
LNAWANOS
Naa
‘ONNZ-NOM
L821
12
A9ia
LALNS
HOLAS
WOmHO
HOME
TILA dt HOUd aanis
LAS GNZ
INaNTTaWOO
BqTONG.
aud
OES
alais
WEENE.cNyY
isu
eee
waLOVUYED
‘owaz-Now
UK“
ote
SO

|

_

-MONVOIAINOIS
AORVOTALND
ZONVOIAI
Se
IVA

40

OL

Mr

:

ual
iva

qu

“

SMS“gunqa

Ok
GGMOL

-

2

rg

~

8

ONTULS
ota UVRDDIG.
NUALIVA
Beiora
IORER
REGO
WALOvEWHO.
QOGIXaN
Axa’
wHOTHa
IRS
asISlas
CLIO
MDDTa
Was
SMOLS.
=(i*sT'TOSV
vasntvaritvarat
ADISUES
ZOuVOTS
A‘OVIE
LIKHOIS
‘TWweroaa
BOT
ladda
ESE
ZONVOLATNOI
EHD
1000s
«USE
1399

sev

dN

EG

aT

ee

AI dl

aI

=

=

AI

=

WO

=

a1

©

—

Co

a‘

:

RYO
TSE

US ae

:

=

LIOTG
aad1d

ar

anv

he

AsWd

-

|

ee

-

EHD
GnML

GE00

on

sa

2

id

yOutt sa
ixan
1198¥
“on3 ae ash A
usd
WOT
IEOTR
varRdKa
MNT
“py
aHL
aaot= yar«syed
xisTNDIS
gr
ANE
ONT
«=

_

ee

a*ald
2

aRHN
axto aoa
oa“Tn

= oe

Md
A'd-

ss

=

a.

090002:

=

==

ee

:

Seas

AT

1900
£4000
yo00",
=

€900-(
«GMR
RE
nosy
Mid
EXAM
‘uta
oR
MOL waHDOIG
“BIsias TIOSEY
ee
cat
ONTus
NUMLIVd
MHOTI
“awors
apeaxa
20°
20"
20°%
BOTE
OEE
COE
Z0°ZE
BOSE
POLE
-ZO40€
20°8t
206 -g0'ee
“Otley
OTOH
BORG
70°69
20°49
orpaeBors
Be.
BOSS woes,
0000
aC
$700
1s00
0000
zoo0
O00. ts
9900
4a
dd
os

Lad

os

*

NG”gewax ne tas
qwois
“

*

720°

ee

08sec
ei eees

9

¢

:

Ye

94

9

He
=

ae

_

a9

SE
pe

ER

¥¥at 20 a0e

80

OY

OR

Te 9D

By

Seah

Cs

gg

ye

OV £9

GS92,VV ND
9z_cE

pens

a
EOD
ye.

ZO £006
£z

ee

ce

29000

.

:

es

ae

-

oie

.

ORE

se

Pp

sage
eeTe

oe

BRDE
ee
pa

oS

mee
che

yy

ee

;

te

bos

he

A*d‘S

ess
ars

—

DIC

aieMOT
HLNOW
‘BAOH
LIKZO
TT
1000dde
reampe
sss

a

SS

2S00
ZETE
TOO GI00
one
2900
1800
TO
Te,
—

-

oS

|

.

(

:

woe

:

OL

Toes

2

GEOR

oe
OR A IE

a
4

eA

|

ON
:

NEE

ee

my

ee

EE
PES,

7 eee ee oO
.

Tes

ee ag

oe

es
eege
So

ae

oe

San

Ht

SS
Pe

ee

Do
ON

co

eae

°

Q

eg

a

ees

:

asi

UF

:

Oe

os

=

ee

OT

ee

—

ed

Dok

os

-

GE
gS
Be
ogee eee
ee
RE
oe ee
en
Ie
eee
ose
0S
RE
Sr
SLs
eeSe

me
GSS
.

6E

—

tt

as OSOCU

tea 02
aoe
9G
90.28
V8
aw
gSoe Ge
ag.
ee eT
PLS
9400
TOO 4600
6500
E00
0s00 E900
6500
COO
69000
100£200
S100
a900
oO og Se
5900
VOD
900 800
a900LZ00E00
1800
9¥18 SZ

aS

eg

BOON

a

a

a

ce

BLN

2099

5

*

i

0°9

-

oes

oe

==

Od

ws

aa

o

othe

oe

oe

[yy

ee

SS

EE
~

i
MD
a
@
@
a
@
ta
ge
gOS
as
®Wowas
PVI
ees
Ba
SONS
ygyag
“ee
gurais
MAINIOd
“muava
wee
eee
gNIMLS
{Nata
NNELEVE
Sora
we
ae
papaya
VST
SHE
ONTLS
Gee
eee
QNn09
1101
OO
su
‘ONTELS
HIONS1
ee
pee
DNTELS
HL
ee
MINT
ISHL
ree
OD
Gndino
BR
LIOIG
EVE
@ION
NWALL
gay,
oe gownos
OINI
arora
Lnadno
COG
ee
-auranouans
PPP
qHL
MHL
91S MALO
ESMHL
va
wouoamas
MENG
OLNT
NWALIVE
ELENA
waiovuvio
gantay
ONTELS
NUGLLVA
ONT
3AOW
TOXLNOD
ee
SLESAd0
LWHANOD "ROH =
:

:

@

a

Be

-

os

-

eh

Co

OR

Co

a BkES

oe

-

o

a

oe

aa

-

CE

¥

“a0

‘

NI ee

OL

LV

40

S

Re
oe,

ee

OL

2

°°

es

|

a

oe

a

oe40 OL

aS

-

UaNO"

Users Guide
Assembler

8-0 -AssemblerError
Messages.
ine
extensive error checkingwhileprocessing
‘The assembler
performs:
source
The philosophybehind
is
that
the
input.
handler
ee
the in error
of
out
should assist
assembler
trouble.
the programmer
Of
ataying

oS

~

assembler

ant ke a programmer write perfect . programs, puto
es possible,
and by making
cting as many faults
forces
unclesn coding practices difficult. To this. end, the assembler
such
certain
as
conventions,
requiring procedure entry pointe| to be
explicitly
declared
data references
ture
into
dictionaries.
the
no

course,
it

-

help

can

by

de

prohibiting

a

et

tee

pro

ges

large extent self

Bel| -~
Format
“Rech:error. fees includescolumn
nulber;whichie the column

Message

:

,

a

that

was detected.
statement sc
was looking at when the error
vv
end
of
This colum
pointe
the
at
the. symbol or
ormallyoe however, in certain
expression found to be errot
exceptional cases;

-

the

4

the

column—countermay beseveralcolumnsdifferent‘than the ites in
In
the
descriptionof ‘the. error messages,the tern "pointediten"
have
refers to the item
Assembler errors
ing the columa counter.
error.

=

been

divided

into

asses:
of

in’
— DAsasters,
ineres
© &
8.2 -Notes

Notes;

ee

and
Cautions,Warnings,
Sttore,
ase

order: ‘sefvertty:

ia

-

“Notesare.

conditional

-

oe

the ‘aedenblar
when,
has” pisces: a

unlikelyoperation.wed
For example, it

oo

branch ine uction with
@l branch
two iden

vesults
operation

in

Zero”

produced.oe

is

unlikely. ot

his enee

an

offset

paths,
the

entirely

ie

note

thé

valid “but

valid

to

use

zero.
Since this
the
considers
assembler
of

‘Offset
arenes Seeanek
:

es

a

_
=

is

__

BB- CautionMessages
As
-

Cattions- are

ee,

e

thatmay produce une

a

for

-

assembled

cross

dmstruction
when

use
4

CBA ¢
on

run

of

one

a

messages
example, the

For
Fatiily instructions.
to A) does not generate a

6800

syatem
stack. ‘Thecaution
oe

‘Use of

B

tipare

6800‘processor

level

;

the

cope
« ‘condition
the assemblerhas detected
when
These
fects.
normally occur

while the

cross

reference —
memory
aseembled inetructions make

Lee

SystemStack"Hepence:
Messages

Warning
-8.4~Warning
that may
i

ae

2

the
that

ptoduce. tin
generation of an
velue

constitute

fe

Wien « gontition
hesbeendeteccel
produced
os
its.
an instruction
For.

eight bit

has more than eight
an
In this
error.

bmetered
e
would
_Beonenees

bite

case

example,4£

for
supplied
may not

and the expression
value
of significance,
it may or

the warningmeneage
“hemetiave.
Value

—

,

Assembler

8.5

Users

Error

~

Messages

Error

invalid
Statement
case

would

be

references

an undefined

invalid

certainly

the

me

error

ssage

produced.

Disaster

~

are

not.
is

this

when
produced
necessarily
fatal

messages

but

_Anstruction

8.6

Guide

if

example,

error

statements

example,

Referencedin

Symbol

an

for
produced
are
unaffected.
oe

this —
In_

Expression"—
—s

producedwhen the assembler has detected a
subsequentlyproduced to be invalid.
the.
symbol
table overflows
available
memory,all
will

labels

femain undefined
little chance of the

The disaster

and

code

an |

1f

6

produced.

produced

For

the

detected

willcause code

There is
The

other

"Undefined

has

Messages

For

correct.

symbol,

Re

messagesare

table.

assembler

wes

Disaster
condition
which

Subsequent

but

the

condition.

following
by the
are
not

message

table is.

and

not

produced

"Insufficient

be

placed in the
symbol
being anywhere
near
Memoryto Define Symbol" is
code

complete list
“of the error messages
assembler. They have been listed in numerical order of
necesearily grouped by function or cause.
a

7

|

.
-

- ‘Undefined
Mnemonic
Error
Code
Operation.
-

—

ee

ao

Theassembler
couldnot

ite.

mnenionic ‘table

or

pointed
direc:

the
the macro

find

in

em in

veither a
Five no-op
a

are generatedin dew of the mended
instructions:
(wpdes
S

Error.
Defined
Previously
Synbol
<

Assembler

Users

10

Error
The.

>

Guide
Label

~

Requiredfor

current

statement
a

This

Operation

contains

label and none

Feautras

an

that a.
directive
specified.

assembler

been

has

|

for This Operation
Error OperandRequired
. “The
current. statenent containe assembler directivethat
been
es
an operand and
Fequires:
epecifted<
“12
Errog “Invalid
Terminator
for Indirection
to
The| assembler
an. ‘operand
attempting
process.
when
Specifying indirect addressing
terminator
character
the
closing
bracket.
encountered
prior
indirection

ll

-

an

has

none

|

=~

-

was

a

was

“13 x

_

to

Not
Error- Registers
Same‘Size
-

UA transferor exchange instruction specifiedtwo
that

both

not

were

bit

eight

registers.
14

~-

Error

Forced

-

registers

both sixteen bit a

or

:

:

Mode
Significancein ‘Immediate
Invalid

‘opérend
also.specified
dmmediate
specifying
addressing
Immediate
significance.
mode.
with
Significance
Te
the
Boe
Amplicit,
instruction.being processed.
Be Invalid
- DirectReference
May
Warning
An
| an ‘abeolute
‘operationusing
aoe has ane
addreseing
that
operand
forces
direct
An
a

1S

a

forced

-

addressing.

determined

—

Error

Index

-

The assembler

;

Bage

—

higietel:
Required

_ was specified,but
Indexed
‘addressing

ae nite

|

designator. followedthe commas.

ee,

-

L7

sme

has

2
extended
is Peamired,
fo: reach:
addressing

address.

target
16

that

ae

Error Predec Invalid
Indexing
withPCR
addressingwas) specifiedvada. the peste er
“Indexed
mode, but
predecrement
-

_

-

the

- 18

=

counter.

Program
Error- Predec
~

the

Si

|

otfect
Tavalid Accumulator
Indexing
with

Indexed —addressing
was
predecrement
but
mode.
an

specified:

oe

register deaigantor

using‘the| _cegister
“specified
offset was
accumulator:

= BG =

:

ee

as

-

a

oe
__

pene
was“specified
both
‘ubing:
mode

add

raglecer oe
m and the register
mode.—
Predecrement
postincrement

I

a

e+ Since this

theoutcome’
of the Jap di

inva

'

the

fe

be

sfeiancy
neyartes
S

Assembler

29

Users

Guide

Error

Indexing

~

Immediate

Specified

addressing
designator

register

mode

with

Immediate

was

specified,
located

was

Addressing
but

index

an

implied.

or

by

the

expression.
30

Warning

Maximum

-

While

the

assembler

maximum

31

32

Error

=~

The

current

for

the

Operator

—

The

Value

a

to

nested

operators

to

parse.

a

two’s

has

too

many

of

Context

too.

deep

The

assembler
token

when

Missing

Right

for

terms

the

parse.

Encountered

value

was

The

result.

zero

contains

expression

Operator

expression,
resuling

an

negated.

Overflow

evaluator
~

Zero

to

Overflow

evaluator
Stack

current

Error

forced

expression

assembler
33

was

Stack

assembler

Error

number

overflow

Negated

evaluating

was

negative

compliment

Number

Negative

Out

parsing

and

expression

an

an

operator

expected

terminator

or

a

was

encountered.

34

Error
The

right
35

36

~

Parentheses

pointed
expression
parentheses.

Error

Too

Many Right

The

pointed

expression

left

parentheses.

~

Error
The

~-

Invalid

of

a
©

more

has

has

Expression

left

Parenthesis

Binary

pointed

context

in

in

in

Operator

Expression

right

more

than

parentheses

than

parentheses

Expression

character

string

was

binary

operator

and

encountered
is

not

in

valid

a

the

binary

operator.
37

Error

The

~

Invalid

Unary

pointed

context

of

Operator

character
a

unary

in

string

Expression
was

and

operator

ae:

encountered
is

not

in
a

valid

the
unary

Operator.

ae

~

8-6

~

“Assembler Users
38

=~

Warning

of

Use

-

WAI

not

Equivalent

has

been

into
a
conditioned
assembled
the
6800 instruction
sequence

wait

A

6800

WAI Mnemonic

with

-Yeplaced

the

cross~assembled

interrupt

The

the

assembler

insert

found

the

label

Disaster Insufficient
The assembler
found
~

41

a

Error

~

42

Library

that

there

specified library file
directory
file.
library

The

error

44

45_

an

CLI

the

memory. ‘to
statement into the symbol

Opened

on disk, or there
id failure of the open on

did

exist

not

File Specification Invalid
Library

file

specification

the

on

was

statement

library

:

:

Error

-

The

library

File

Library

Specification

statement

requires

Warning
LibraryInclusion

The assembler
the
however,

will

If

99

will

in

insufficient

Be

resulting

invalid.

43

of

was

Could Not

File

a

-

result

for

The

Error

was

the current

was

the

The

MemoryLibrary Inclusion
insufficient
memory to.
inclusion
file.

the library

open

be

should

CWAIL $EF.
can

execution

the

WAI.

there

that
‘of

table.

40

WAI;

InsufficientMemory to Define Symbol

~

Disaster

CLI;

instructions

occurring
before

NOP;

of

but

cross
and
Note that

instruction.

instruction

after

CWAI

to

encountered

6809

sequence

instruction
39

is

Guide

than

more
no

Warning

longer
-

allow

any

number

count

is.

are

inclusions

Multiply

a

file

specification.

May Be

Numbers

inclusion
be

Required

of
two

used,

the

of
two
product
contained
in
the
sixteen
sixteen
bits
significant
result.

oe

of

8~7

the

~

files,

digits long .-

inelusionnumber

Complement
Overflow

bit
sixteen
bit

The

inclusion

decimal

valid.

CausedTwo’ s

Invalid

numbers .
result.’
was

‘product

not

could
The
least
used

as

oe

be

the

—
-

Assembler

Users

46

Warning

47

Guide

Divide

-

The

divisor

has

substituted

Error

The

value

ORG

found

was

the

Absolute

~

Zero

by

be

to

maximum positive

Value

Required

absolute

directive
hence
the

value

statement

must

have

number

Error
The
its

49

50

forces

Absolute

-

RMB

the
of

counter

program

the

the

.on

relocatability

a

become

to

expression

ORG

attribute

Value

directive

Required

of

requires

RMB

by

non-relocatable

a

operand

:

E

~

The

ANDCC

flag

which

not

current

except
a

Stack

"E"

condition

stack.

Symbol

redefine

to

attempts

on

the
the

on

Redefine Protected

to

statement

protected

Except

referenced

meaningful

Attempt

-

Undefined

Flag

ORCC operation

or

is

for

length

«

Error

result.

:

Caution Condition

The

assembler
the

as

by ORG

absolute.
48

the

and

zero

the

value

of

a

symbol.
OS

51

Warning
This

Label

-

is

the

subsequently
52

Disaster

-

This

Subsequently

indicates
should

with

ail

report.

53

Error
The

-

Undefined

The

Phasing

is

node

Detected

internal

malfunction

be

reported

at

the

once

this

program
generating
data
be
should

error

with

included

Referenced
a

in

was

the

Structure
data

qualified

that

name

the

in

Southwest

to

name

found

not

when

it

in

the

dictionary.
Null

Node

assembler

encountered

Error

relevent
Node

a

-

that

label

a

an

assembler processing

_Structure’s
Error

Pass

was

encountered

54

of

Copies

along

of

Generation

Code

and

Technical.

occurance

redefined.

error

assembler

first

Redefined

was

a

null

Name

ay

Invalid

processing
symbol

in
a

qualified

terminator

or

-~ 8-8

Structure

-

data

name

when it.

characters

att,

Assembler Users
55

==

Disaster Insufficient
~-

Memory

Insuffietent
memory remained
allocate.

to

space

space

dictionary

and:

56

——

the

to

Define

in

assembler
dictionary
new

new dictionary
in

remained

procedure

has

been.

not

data

or

defined.

ProgramCounter
Define

Disaster Insufficient Memory to
‘memory

_

Se

-

Insufficient

Procedure

the

a

for

Guide

assembler

the

dictionary
pace. to allocate a new program counter.
57 == Error
- Insufficient
Memory
for DataDictionary
-

msutftedent
‘memoryremained
.allacate

to

Space

dictionary

and

defined.
58

— Error

the

assemblerdictionary
data
qualified

new

qualified

new

name

_

has- not. been

oS

ee

SS

oo

es

ae

ae

Hight Index
Bit

~

in the
for
a

space

Offset

will

Ineuffictent

be

Constantoffset indexed addressing was specified
with the -

offset

forced

that

instruction
59 —

a

CRE

reach

to

bits.

eight

to

offset

this

will
its

be

insufficient

to” allow the.

determined

-

to

that

_

this

-

te

reach

a

The assembler

eight

offset
its

is

insufficient

has

determined

2
to allow‘the,Anetruction

target.
Error ~Branch
out of Range
‘Theassembler
option was specifiedand.the
range-check
short
branch.

60 =

current

cannotreach. its target.
ValueRequired for MB
Absolute

Error|
“theFMB directiverequires

—~
=

-

-

its

62

has

target.

of

Sn

61

‘The assembler

Short.Branchcannot Reach
a
Forced
‘Target
The expression
‘field bits. branchinstructionhas. forced
the
offset

Error -

ws

:

8

first

ce

a

Error | Forward

--

Reference for.FMB...

-

“The
forward

_

non-relocatable
lengthfor

a

operand.

Invalid

‘lengthexpression
reference.

the
outcome
invalid

of

Since

of

:

the

an

the

FMB

;

FMB.directive

contained

may be affected

reference

a

WOE

ks

by

directive, this constitutes:
an

:

-

circularreference.

,

63 —~
Error- ‘SixteenBit. Precision
forPB
be
Cannot
The value expression of an
FMB
has a forced directive.
-

@ixteen

.

|

Forced

bit

precision.
bits
of

doworndar
"ohehe

The

the

ga

has

assembler

the

expression:
as

se

‘the—
bytes

used

fill.

oe

Assembler

64

Users

Guide

Error

Invalid

=

Option

Specified
oe

‘The

specified
option
ignored.
been

has

65

Error

error.

Error

the

for

and

OPTdirective

Error

has

message

assembly

conditional
66

invalid

Programmer-Signal
led

=

An

is

Specified

~—

been

Invalid

Register

Indexed addressing mode
specified

the

as

generated

by

or
ERR
ERRIF

an

statement.
as

Index

Base

but.

the

specified

was

index

base

address

“register
used

be

cannot

for
.

indexed

67

addressing.

Error

Operand

-

The

assembler

Warning
The

assembler

sixteen

bit

Error

pointed
left

Warning
push

Error

=

An

Reference

Parent

-

Directive

assembler

secondary
as
primary

a

Q
coy

right

closing
but

no

List
with

specified

was

in

Invalid

parental reference
code

in

a

null

was

dictionary

are

valid.

—

Primary

was

statements.

8-10

while

where

local

=

only

Statement

directive Directivesencountered must

statement.

~

encountered

—

global

Requires

Dictionary

Global

the

‘global references

Error

with

in

a

bit

eight

mode,
addressing
the
expression.

Specified

operation

from

Indirection

terminated

preceeded

when

list.

explicit
processing

72

has

Registers

pull

or

An

or

required

for

indirect

bracket
No

-

_Yegister
71

the

Required

expression

indicating

leading

A

Bracket

Leading

bracket

70

expression

of

valid

bits

significant
obtain

to

end

_

value.
-

The

truncated

not

—

specifying
and

encountered

Truncated

Value

has

operand

an

it

operands| are

addressing.

Immediate

-

immediate

69

Null

operator.
indirect

using
68

when

addressing

statement

Indirection

processing

was

indirect

for

Required

in

the

always

contextof ae

be

specified:

_

<= Warning

73

Too

“4

levels

many

default

Absolute

-

absolute

were

has

counter

}

A

defined

branch

_ Offset

The

specified.

been

selected.

as

identifier thathas not

an

a

counter

program

If

instruction

1s

to.
No

.

:

-

computed
selected,

was

supressed.

=

the

processing
transfer

end

address

has

statement

been

we

module.
Disaster

+

a

with

optimization

End
Statementa,
Missing
an end of
‘The
assemblerhas detected

Warning

~~

-

Zero

zero.

branch

been

name. —

was encountered
instruction
of
full

value

the entire

76

specifies

- Branch Offsetis

Note

a

Previous

program

USE statement

previously

999

USE

‘Error= Invalid Program CounterSpecified
A’

a

Counter Selected

Program
of

Guide
Users

Assembler

file
for
the

condition prior
MAIN

to the

assigned
:

ay

|

procedure.

|

code

object
ee

oe

:

.

oe.

-

Invalid Error Address

‘This. error indicates
be
assembler and should
Technical.
along

with

report

eo

Copies.

all

of

relevent
.

internal

an

reported
the
data

program
should

Deg

=

8-11 me

malfunction
at

once

generating
be

included

to

in_

the

Southwest
this
error
with

the

|

—

:

